//>>built
require({cache:{"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html".split(" "),function(c,d,a,b,e,f,h,n,m,k){b("dijit-legacy-requires")&&h(0,function(){c(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});h=d("dijit.form.Button"+(b("dojo-bidi")?"_NoBidi":""),[n,m],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",
type:"class"},baseClass:"dijitButton",templateString:k,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},_fillContent:function(a){if(a&&(!this.params||!("label"in this.params)))if(a=f.trim(a.innerHTML))this.label=a},_setShowLabelAttr:function(b){this.containerNode&&a.toggle(this.containerNode,"dijitDisplayNone",!b);this._set("showLabel",b)},setLabel:function(a){e.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.",
"","2.0");this.set("label",a)},_setLabelAttr:function(a){this.inherited(arguments);!this.showLabel&&!("title"in this.params)&&(this.titleNode.title=f.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});b("dojo-bidi")&&(h=d("dijit.form.Button",h,{_setLabelAttr:function(a){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}}));
return h})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(c,d,a,b,e,f,h,n){d("dijit-legacy-requires")&&b(0,function(){require(["dijit/form/_FormValueWidget"])});return c("dijit.form._FormWidget",[e,h,f,n],{setDisabled:function(b){a.deprecated("setDisabled("+b+") is deprecated. Use set('disabled',"+b+") instead.","","2.0");this.set("disabled",b)},setValue:function(b){a.deprecated("dijit.form._FormWidget:setValue("+
b+") is deprecated.  Use set('value',"+b+") instead.","","2.0");this.set("value",b)},getValue:function(){a.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!d("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)},_setTypeAttr:null})})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),
function(c,d,a,b,e,f){return c("dijit.MenuSeparator",[a,b,e],{templateString:f,buildRendering:function(){this.inherited(arguments);d.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),function(c,d,a,b,e,f,h,n,m,k,g,q){h=c("dijit.MenuItem"+
(f("dojo-bidi")?"_NoBidi":""),[n,m,k,g],{templateString:q,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(a){this._set("label",a);var b="",e;e=a.search(/{\S}/);if(0<=e){var b=a.charAt(e+1),q=a.substr(0,e);a=a.substr(e+3);e=q+b+a;a=q+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+b+"\x3c/span\x3e"+a}else e=a;this.domNode.setAttribute("aria-label",e+" "+this.accelKey);this.containerNode.innerHTML=a;this._set("shortcutKey",b)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",
type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){a&&!("label"in this.params)&&this._set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);a.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&a.set(this.accelKeyNode,"id",this.id+"_accel");d.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==f("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(a){}},_onFocus:function(){this.getParent()._onItemFocus(this);this.inherited(arguments)},
_setSelected:function(a){b.toggle(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){e.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},setDisabled:function(a){e.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(b){this.accelKeyNode&&
(this.accelKeyNode.style.display=b?"":"none",this.accelKeyNode.innerHTML=b,a.set(this.containerNode,"colSpan",b?"1":"2"));this._set("accelKey",b)}});f("dojo-bidi")&&(h=c("dijit.MenuItem",h,{_setLabelAttr:function(a){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));return h})},"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(c,d,a,b){return c("dijit.CheckedMenuItem",
a,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:b,checked:!1,_setCheckedAttr:function(a){this.domNode.setAttribute("aria-checked",a?"true":"false");this._set("checked",a)},iconClass:"",role:"menuitemcheckbox",checkedChar:"\x26#10003;",onChange:function(){},_onClick:function(a){this.disabled||(this.set("checked",!this.checked),this.onChange(this.checked));this.onClick(a)}})})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(c,d,a){var b=window,e={addOnWindowUnload:function(e,
h){c.windowUnloaded||a(b,"unload",c.windowUnloaded=function(){});a(b,"unload",d.hitch(e,h))},addOnUnload:function(e,c){a(b,"beforeunload",d.hitch(e,c))}};c.addOnWindowUnload=e.addOnWindowUnload;c.addOnUnload=e.addOnUnload;return e})},"xl/paf/PlayerLoader":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/json dojo/Deferred dojo/Evented dojo/_base/config dojo/dom-attr ./enums xl/assignment/AssignmentEnums xl/util/stringUtils".split(" "),function(c,d,a,b,e,f,h,n,m,k,g){return c("xl.paf.PlayerLoader",
[f],{_playerReadyDefferred:null,playerFrame:null,timeout:3E4,_timeoutHandle:null,playerLoaded:!1,constructor:function(a){this.EVENT_PLAYER_READY=m.EVENT_PLAYER_READY;this.EVENT_NODERESULT_RESPONSE=m.EVENT_NODERESULT_RESPONSE;this.EVENT_SEQUENCENODE_LOADED=m.EVENT_SEQUENCENODE_LOADED;this.EVENT_NAVIGATE=m.EVENT_NAVIGATE;this.EVENT_SUBMITGRADE=m.EVENT_SUBMITGRADE;this.EVENT_MEDIANODERESULT=m.EVENT_MEDIANODERESULT;this.EVENT_PRINT_REQUEST=m.EVENT_PRINT_REQUEST;this.EVENT_ASSIGNMENT_COMMAND=m.EVENT_ASSIGNMENT_COMMAND;
this.EVENT_TOGGLE_UI=m.EVENT_TOGGLE_UI;this.EVENT_ALLOW_CLOSE=m.EVENT_ALLOW_CLOSE;this.EVENT_TOGGLE_STANDBY=m.EVENT_TOGGLE_STANDBY;this.EVENT_OPEN_OVERVIEW=m.EVENT_OPEN_OVERVIEW;this.EVENT_CLOSE_OVERVIEW=m.EVENT_CLOSE_OVERVIEW;this.EVENT_CLOSE_ACTIVITY=m.EVENT_CLOSE_ACTIVITY;this.EVENT_QUESTION_STATUS_CHANGED=m.EVENT_QUESTION_STATUS_CHANGED;this.EVENT_ASSIGNMENT_ACTION=k.EVENT_ASSIGNMENT_ACTION;this.EVENT_LOAD_QUESTION=m.EVENT_LOAD_QUESTION;this.EVENT_RETURN_TO_ASSIGNMENT=k.EVENT_RETURN_TO_ASSIGNMENT;
this.playerFrame=a;n.set(a,{webkitallowfullscreen:"true",mozallowfullscreen:"true",allowfullscreen:"true"});this._registerMessageHandler()},_registerMessageHandler:function(){var b=this;a(window,"message",function(a){if(a.source===b.playerFrame.contentWindow||a.source===window.parent)a=g.parsePostMessage(a.data),b._handleMessage(a)})},_handleMessage:function(a){switch(a["@type"]){case "PlayerReady":this._playerReady(!0,a);break;case this.EVENT_NODERESULT_RESPONSE:this._handleNodeResultResponse(a);
break;case this.EVENT_SEQUENCENODE_LOADED:this._handleSequenceNodeLoaded(a);break;case this.EVENT_NAVIGATE:this._handleNavigate(a);break;case this.EVENT_SUBMITGRADE:this._handleSubmitGrade(a);break;case this.EVENT_MEDIANODERESULT:this._handleMediaNodeResult(a);break;case this.EVENT_PRINT_REQUEST:this._handlePrintRequest(a);break;case "PlayerCommand":this._handlePlayerCommand(a);break;case this.EVENT_ASSIGNMENT_COMMAND:this._handleAssignmentCommand(a);break;case this.EVENT_TOGGLE_UI:this._handleToggleUI(a);
break;case this.EVENT_ALLOW_CLOSE:this._handleAllowClose(a);break;case this.EVENT_TOGGLE_STANDBY:this._handleToggleStandby(a);break;case this.EVENT_OPEN_OVERVIEW:this.emit(this.EVENT_OPEN_OVERVIEW);break;case this.EVENT_CLOSE_OVERVIEW:this.emit(this.EVENT_CLOSE_OVERVIEW);break;case this.EVENT_CLOSE_ACTIVITY:this._handleCloseActivity(a);break;case this.EVENT_QUESTION_STATUS_CHANGED:this._handleQuestionStatusChanged(a);break;case this.EVENT_ASSIGNMENT_ACTION:this._handleAssignmentAction(a);break;case this.EVENT_LOAD_QUESTION:this._handleLoadQuestion(a);
break;case this.EVENT_RETURN_TO_ASSIGNMENT:this._handleReturnToAssignment(a)}},_handleToggleStandby:function(a){this.emit(this.EVENT_TOGGLE_STANDBY,a,this)},_handleToggleUI:function(a){this.emit(this.EVENT_TOGGLE_UI,a,this)},_handleMediaNodeResult:function(a){this.emit(this.EVENT_MEDIANODERESULT,a,this)},_handleNodeResultResponse:function(a){this.emit(this.EVENT_NODERESULT_RESPONSE,a,this)},_handleSequenceNodeLoaded:function(a){this.emit(this.EVENT_SEQUENCENODE_LOADED,a,this)},_handleNavigate:function(a){this.emit(this.EVENT_NAVIGATE,
a,this)},_handleSubmitGrade:function(a){this.emit(this.EVENT_SUBMITGRADE,a,this)},_handlePrintRequest:function(a){this.emit(this.EVENT_PRINT_REQUEST,a,this)},_handlePlayerCommand:function(a){this.postMessage(a)},_handleAssignmentCommand:function(a){this.emit(this.EVENT_ASSIGNMENT_COMMAND,a,this)},_handleAllowClose:function(a){this.emit(this.EVENT_ALLOW_CLOSE,a,this)},_handleCloseActivity:function(a){this.emit(this.EVENT_CLOSE_ACTIVITY,a,this)},_handleQuestionStatusChanged:function(a){this.emit(this.EVENT_QUESTION_STATUS_CHANGED,
a,this)},_handleAssignmentAction:function(a){this.emit(this.EVENT_ASSIGNMENT_ACTION,a,this)},_handleLoadQuestion:function(a){this.emit(this.EVENT_LOAD_QUESTION,a,this)},_handleReturnToAssignment:function(a){this.emit(this.EVENT_RETURN_TO_ASSIGNMENT,a,this)},_clearTimeout:function(){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null)},readyFromPostMessage:!1,_playerReady:function(a,b){this._clearTimeout();this.readyFromPostMessage=a;this.playerLoaded=!0;var e=this._playerReadyDeferred;
e&&(this._playerReadyDeferred=null,e.resolve(a));this.emit(this.EVENT_PLAYER_READY,b,this);return!!e},loadPlayer:function(a){var b=this._playerReadyDeferred=new e,g=this;this.playerFrame.src!==a?(console.log("player loading...",a),this.playerFrame.src=a,this._timeoutHandle=setTimeout(function(){g._timeoutHandle=null;console.log("Player considered loaded after timeout",a);g._playerReady(!1)},this.timeout)):g._playerReady();return b.promise},unloadPlayer:function(){this.playerFrame.src="about:blank";
this.playerLoaded=this.readyFromPostMessage=!1},postMessage:function(a){this.playerLoaded&&(null!=this.playerFrame&&null!=this.playerFrame.contentWindow)&&this.playerFrame.contentWindow.postMessage(b.stringify(a),this.playerFrame.src)}})})},"xl/paf/enums":function(){define([],function(){return{EVENT_PLAYER_READY:"PlayerReady",EVENT_NODERESULT_RESPONSE:"NodeResultResponse",EVENT_SEQUENCENODE_LOADED:"SequenceNodeLoaded",EVENT_NAVIGATE:"Navigate",EVENT_SUBMITGRADE:"SubmitGrade",EVENT_MEDIANODERESULT:"MediaNodeResult",
EVENT_PRINT_REQUEST:"PrintRequest",EVENT_ASSIGNMENT_COMMAND:"AssigmentCommand",EVENT_TOGGLE_UI:"ToggleUI",EVENT_ALLOW_CLOSE:"AllowClose",EVENT_TOGGLE_STANDBY:"ToggleStandby",EVENT_OPEN_OVERVIEW:"OpenOverview",EVENT_CLOSE_OVERVIEW:"CloseOverview",EVENT_CLOSE_ACTIVITY:"CloseActivity",EVENT_QUESTION_STATUS_CHANGED:"QuestionStatusChanged",EVENT_LOAD_QUESTION:"LoadQuestion"}})},"xl/assignment/AssignmentEnums":function(){define([],function(){return{EVENT_ASSIGNMENT_ACTION:"assignmentaction",EVENT_RETURN_TO_ASSIGNMENT:"ReturnToAssignment"}})},
"xl/assignment/OverviewButton":function(){define("dojo/_base/declare dojo/_base/lang xl/dijit-bootstrap/Button dijit/layout/ContentPane dijit/focus dojo/keys dojo/on dojo/dom dojo/dom-construct dojo/dom-class dojo/dom-style dojo/dom-attr dojo/query dojo/topic dijit/popup dijit/_HasDropDown dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/OverviewPanel.html xl/dijit/Iframe xl/util/localization!html5player/feedback xl/util/localization!html5player/learningaids xl/util/localization!html5player/player".split(" "),
function(c,d,a,b,e,f,h,n,m,k,g,q,t,u,p,s,l,v,r,z,C,D,E){var x=c("xl.assignment._OverviewPanel",[b,l,v],{templateString:r,doneText:"X",doneLabel:E["button.close"],printText:D["la.print"],_printButtonClicked:function(a){this.overview.printOverview();a.stopPropagation()},_doneButtonClicked:function(){this.overview.closeDropDown(!0)},_printButtonKeyDown:function(a){a.keyCode===f.TAB&&a.shiftKey&&(a.preventDefault(),a.stopPropagation(),e.focus(this.doneButton.domNode))},_closeButtonKeyDown:function(a){a.keyCode===
f.TAB&&!a.shiftKey&&(a.preventDefault(),a.stopPropagation(),e.focus(this.printButton.domNode))},constructor:function(){var a=this;this.own(u.subscribe("localizationChanged",function(){a.updateDisplay()}))},postCreate:function(){this.inherited(arguments);this.own(h(this.printButton,"keydown",d.hitch(this,this._printButtonKeyDown)),h(this.doneButton,"keydown",d.hitch(this,this._closeButtonKeyDown)))},updateDisplay:function(){this.doneButton.set("label","X");this.printButton.set("label",D["la.print"])},
initFocus:function(){this.overviewPanelContent.focus()}});return c("xl.assignment.OverviewButton",[a,s],{dropDownPosition:["below-centered"],url:"",title:"",assignment:null,constructor:function(a){this.dropDown=a.panel?a.panel:new x;this.assignment=a.assignment;this.dropDown.overview=this;var y=this;this.own(this.dropDown.frame.on("framemessage",function(a){y._OnFrameMessage(a)}),u.subscribe("localizationChanged",function(a){y.dropDown.frame&&y.dropDown.frame.postMessage({"@type":"ChangeLocale",locale:a})}));
k.add(this.dropDown.domNode,"overviewPanelContentPane")},startup:function(){"undefined"===typeof this.assignment&&(this.assignment=this.getParent())},printOverview:function(){this.dropDown.frame.postMessage({"@type":"Print"})},postCreate:function(){this.inherited(arguments);q.set(this.focusNode,"aria-haspopup","true")},toggleButton:function(a){this.set("disabled",!a)},_OnFrameMessage:function(a){switch(a["@type"]){case "doExercise":this.assignment._requestItemNodeResult({command:"loadquestion",commandArgs:{questionId:a.questionId,
exercise:a.exercise,questionIndex:a.questionIndex}});this.closeDropDown();break;case "doMediaExercise":this.assignment.launchMediaQuestion(a.questionId,a.partnerGraded),this.closeDropDown()}},openDropDown:function(){this.inherited(arguments);var a=p.getTopPopup();a.wrapper.removeAttribute("aria-label");a.wrapper.removeAttribute("role");for(var y;y=a.handlers.pop();)y.remove();var b=this,a=this.title?this.title:null;this.dropDown.frame.load(this.url,!b.postOverviewCommand,!1,a).then(function(){b.postOverviewCommand&&
b.assignment.postCommand("overview")});q.set(this.domNode,"aria-labelledby",a);this.dropDown.initFocus&&this.dropDown.initFocus()},loadOverview:function(a){this.dropDown.frame.postMessage({"@type":"Load",action:a},"*")},closeDropDown:function(a){this.inherited(arguments);this.postOverviewCommand||this.dropDown.frame.load("about:blank");e.focus(this.domNode);this.assignment.onOverviewClosed(a)},setup:function(a){this.url=a.url;this.dropDown.title.innerHTML=this.title=a.title;this.postOverviewCommand=
a.postOverviewCommand;this.assignmentTitle=a.assignmentTitle},_onBlur:function(){}})})},"xl/dijit/Iframe":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/Deferred dojo/on dojo/json dojo/dom-style dojo/dom-geometry dojo/window dojo/dom-attr xl/util/stringUtils".split(" "),function(c,d,a,b,e,f,h,n,m,k){return c("xl.dijit.Iframe",[d],{_frameReadyDeferred:void 0,timeout:5E3,domLoadTimeout:2E3,framePreferredSize:{h:void 0,w:void 0},minimumBottomPadding:4,loaded:!1,postCreate:function(){this.inherited(arguments);
this._registerMessageHandler();m.set(this.domNode,{webkitallowfullscreen:"true",mozallowfullscreen:"true",allowfullscreen:"true"})},_registerMessageHandler:function(){var a=this;this.own(b(window,"message",function(b){try{if(null==a.domNode.contentWindow||b.source!==a.domNode.contentWindow&&b.source.name!==a.domNode.contentWindow.name+"-poppout")return}catch(e){return}b=k.parsePostMessage(b.data);a._handleMessage(b)}))},_handleMessage:function(a){this.startup();switch(a["@type"]){case "FrameReady":case "PlayerReady":this._frameReady(a);
break;case "PlayerResized":this._playerResized(a)}this.emit("framemessage",a)},_clearTimeout:function(){this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null)},_frameReady:function(a){this._clearTimeout();this.loaded=!0;var b=this._frameReadyDeferred;this.framePreferredSize={h:a.height,w:a.width};if(a.height){var e=n.getBox(this.domNode.ownerDocument),d=h.position(this.domNode),e=Math.min(e.t+e.h-this.minimumBottomPadding,d.y+a.height)-d.y;f.set(this.domNode,"height",e+
"px")}a.width&&f.set(this.domNode,"width",a.width+"px");return b?(this._frameReadyDeferred=null,b.resolve(),!0):!1},resize:function(a){a?f.set(this.domNode,{height:a.h+"px",width:a.w+"px"}):null!=this.framePreferredSize&&f.set(this.domNode,{height:this.framePreferredSize.h+"px",width:this.framePreferredSize.w+"px"})},_playerResized:function(a){this.framePreferredSize={h:a.height,w:a.width};if(a.height){var b=n.getBox(this.domNode.ownerDocument),e=h.position(this.domNode),b=Math.min(b.t+b.h-this.minimumBottomPadding,
e.y+a.height)-e.y;f.set(this.domNode,"height",b+"px")}a.width&&f.set(this.domNode,"width",a.width+"px")},_fixUri:function(a){var b=a;"https:"==location.protocol&&(b=a.replace(/^http:\/\//i,"https://"));return b},post:function(e,d,c){var h=this._frameReadyDeferred=new a;e=this._fixUri(e);var f=document.createElement("form");f.action=e;f.method="POST";f.target=this.domNode.name;for(var k in d)if(d.hasOwnProperty(k)){var l=document.createElement("input");l.name=k;l.type="hidden";l.value="object"===typeof d[k]?
JSON.stringify(d[k]):d[k];f.appendChild(l)}f.style.display="none";document.body.appendChild(f);this.loaded=!1;var v=this;if(c)var r=b(this.domNode,"load",function(){r.remove();var a=v._frameReadyDeferred;a&&(v._frameReadyDeferred=null,a.resolve())});f.submit();document.body.removeChild(f);this.src=e;this._timeoutHandle=setTimeout(function(){v._timeoutHandle=null;console.log("Frame considered loaded after timeout",e);v._frameReady({})},c?this.domLoadTimeout:this.timeout);return h.promise},load:function(e,
d,c,f){var h=this._frameReadyDeferred=new a;e=this._fixUri(e);var k=this;if(d||this.src!==e){this.domNode.src="about:blank";this.loaded=!1;if(c)var l=b(this.domNode,"load",function(){l.remove();var a=k._frameReadyDeferred;a&&(k._frameReadyDeferred=null,a.resolve())});f&&(this.domNode.title=f);this.domNode.src=this.src=e;this._timeoutHandle=setTimeout(function(){k._timeoutHandle=null;console.log("Frame considered loaded after timeout",e);k._frameReady({})},c?this.domLoadTimeout:this.timeout)}else k._frameReady({}),
k.emit("framemessage",{"@type":"FrameReady"});return h.promise},unload:function(){this.domNode.src=this.src="about:blank";this.loaded=!1},postMessage:function(a){this.domNode.contentWindow&&this.domNode.contentWindow.postMessage(e.stringify(a),this.src)}})})},"xl/assignment/actions/ActionHandler":function(){define("dojo/_base/declare xl/util/_ActionHandlerBase ./InitializeAction ./DisplaySequenceNodeAction ./UpdateStatsAction ./CloseAssignmentAction xl/player/actions/ConfirmationDialogAction xl/player/actions/AlertAction ./UpdateResultAction ./ChangeLanguageAction ./PrintAssignmentAction xl/player/actions/SetupAnalyticsDimensionsAction ./AssignmentOverviewAction ./InactivityTimeoutAction ./UpdateMasteryAction ./PlayerCommandAction ./ChangeServerUrlAction ./UpdateRemediationTitleAction ./ShowOverviewAction ./UpdateAttemptAction".split(" "),
function(c,d,a,b,e,f,h,n,m,k,g,q,t,u,p,s,l,v,r,z){return c("xl.assignment.actions.ActionHandler",d,{constructor:function(a){this.registerActions()},registerActions:function(){this._handlers.initialize=new a;this._handlers.displaysequencenode=new b;this._handlers.updatestats=new e;this._handlers.closeassignment=new f;this._handlers.confirmationdialog=new h;this._handlers.alert=new n;this._handlers.updateresult=new m;this._handlers.changelanguage=new k;this._handlers.printassignment=new g;this._handlers.setupanalyticsdimensions=
new q;this._handlers.overview=new t;this._handlers.inactivitytimeout=new u;this._handlers.updatemastery=new p;this._handlers.playercommand=new s;this._handlers.changeserverurl=new l;this._handlers.updateremediationtitle=new v;this._handlers.showoverview=new r;this._handlers.updateattempt=new z}})})},"xl/util/_ActionHandlerBase":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","xl/util/logger","dojo/_base/Deferred"],function(c,d,a,b,e){return c("xl.util.ActionHandlerBase",
null,{_handlers:[],playActions:function(b,d){var c=new e,m=a.clone(b);this._playNextAction(m,d,c);return c},_playNextAction:function(a,d,c){if(null==a||0===a.length)c.resolve("ok");else{var m=a.shift(),k=this._handlers[m.action];if(null==k)b.log("Invalid Action: "+m.action,{category:b.category.VersionMismatch,silent:!0}),this._playNextAction(a,d,c);else{var g=this;try{e.when(k.process(m,d),function(){g._playNextAction(a,d,c)},function(e){b.log(e.message,{category:b.category.Javascript,error:e,severity:b.severity.Critical});
g._playNextAction(a,d,c)})}catch(q){b.log(q.message,{category:b.category.Javascript,error:q,severity:b.severity.Critical}),g._playNextAction(a,d,c)}}}},playSingleAction:function(a,e){var d=this._handlers[a.action];return null==d?(b.log("Invalid Action: "+a.action,{category:b.category.VersionMismatch,silent:!0}),null):d.process(a,e)}})})},"xl/assignment/actions/InitializeAction":function(){define(["dojo/_base/declare"],function(c){return c("xl.assignment.actions.InitializeAction",null,{process:function(d,
a){a.initDisplay(d)}})})},"xl/assignment/actions/DisplaySequenceNodeAction":function(){define(["dojo/_base/declare"],function(c){return c("xl.assignment.actions.DisplaySequenceNodeAction",null,{process:function(d,a){a.loadSequenceNode(d.sequenceNode,d.playerId)}})})},"xl/assignment/actions/UpdateStatsAction":function(){define(["dojo/_base/declare"],function(c){return c("xl.assignment.actions.UpdateStatsAction",null,{process:function(d,a){a.updateStats(d)}})})},"xl/assignment/actions/CloseAssignmentAction":function(){define(["dojo/_base/declare"],
function(c){return c("xl.assignment.actions.CloseAssignmentAction",null,{process:function(d,a){console.log("doing assignment CloseAssignmentAction");a.closeAssignment(d.arguments)}})})},"xl/player/actions/ConfirmationDialogAction":function(){define("dojo/_base/declare xl/util/logger xl/player/dialogs/ConfirmationDialog dojo/_base/Deferred xl/util/stringUtils xl/util/higherEdUtils dojo/topic xl/util/standbyHandler".split(" "),function(c,d,a,b,e,f,h,n){return c("xl.player.actions.ConfirmationDialogAction",
null,{process:function(d,c){var g=d.title,h=d.buttons;c.useSentenceCase&&(g=e.sentenceCase(g),f.sentenceCaseLabels(h));var t=!0===d.hideClose,u=d.html||e.textToHtml(d.text),p=new a({title:g,htmlContent:u,commandButtons:h,style:"width:400px","class":d["class"]||"xlConfirmationDialog",hideClose:t,closable:!t}),s=new b,l=n.startModal();p.on("hide",function(a){if(a=p.executeCommand)a.command?a.command.command&&(n.endModal(l),l=null,c.postCommand(a.command.command,a.command.arguments)):a.actions&&(c._playActions?
c._playActions(a.actions,c):c.playActions&&c.playActions(a.actions,c));p.destroy();s.resolve(a);l&&n.endModal(l)});p.show();return s}})})},"xl/player/dialogs/ConfirmationDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/dom-style dojo/dom-geometry dojo/_base/lang dojo/_base/array dojo/html dojo/query dojo/on dojo/_base/Deferred dijit/registry xl/dijit-bootstrap/Button xl/util/stringUtils ./ModalBaseDialog xl/util/ga xl/util/localization!html5player/popup".split(" "),
function(c,d,a,b,e,f,h,n,m,k,g,q,t,u,p,s,l){var v=/\d+(\.\d+)?/,r=c("xl.player.dialogs.ConfirmationDialog",[p],{contentString:"Set the contentString property to display text",commandButtons:null,executeCommand:null,_focusButton:null,postMixInProperties:function(){this.ariaRole="alertdialog";this.htmlContent&&(this.contentString=this.htmlContent);this.inherited(arguments);this.commandButtons&&h.forEach(this.commandButtons,function(a){this.addButton({label:a.label},a,!1,a["default"],!0)},this)},setupFooter:function(){var a=
this.inherited(arguments);this.defaultButton?this._focusButton=this.defaultButton:a&&(this._focusButton=a)},show:function(){var a=this.inherited(arguments),b=this;a.then(function(){b._focusButton.focus()});return a},_size:function(){if((buttons=this.getDialogButtons())&&0<buttons.length){var a=this._calcButtonsWidth();this._setDialogWidthStyle(a)}this.inherited(arguments)},_setDialogWidthStyle:function(a){var d=this.domNode,l=b.getComputedStyle(d),c=l.minWidth.match(v)||[0],r=l.width.match(v)||[0],
r=Math.max(parseFloat(c[0]),parseFloat(r[0]));a=e.getPadExtents(d,l).w+Math.ceil(a);dialogWith=Math.max(r,a);b.set(d,{width:dialogWith+"px"})},_calcButtonsWidth:function(){for(var a=0,d=0;d<buttons.length;d++)var l=b.getComputedStyle(buttons[d].domNode),v=l.width.match(/\d+(\.\d+)?/)||[0],l=e.getMarginExtents(buttons[d].domNode,l),a=a+(l.l+parseFloat(v[0])+l.r);return a},buttonClicked:function(a,b){this.executeCommand=b;this.hide()},onCancel:function(a){this.inherited(arguments);for(var b=0;b<this.commandButtons.length;b++){var e=
this.commandButtons[b].command;e&&(e.arguments&&e.arguments.isRemediationQuestion)&&s.sendEvent("RemediationStayed","FeedbackCancelButton","",0);if(e=this.commandButtons[b].actions)for(var d=0;d<e.length;d++)"saveresultcancelled"===e[d].action&&(this.executeCommand=this.commandButtons[b])}}});r.COMMAND={CANCEL:"cancel",OK:"ok",YES:"yes",NO:"no"};r.BUTTON={YES:{command:r.COMMAND.YES,label:l.yes},NO:{command:r.COMMAND.NO,label:l.no},OK:{command:r.COMMAND.OK,label:l.ok},CANCEL:{command:r.COMMAND.CANCEL,
label:l.cancel}};r.DEFAULT_WIDTH="400px";r.displayHtml=function(a,b,e,d,l){var v=new r({title:b,htmlContent:a,commandButtons:e,style:"width:"+(d||r.DEFAULT_WIDTH),"class":l||""}),y=new g;v.on("hide",function(a){y.resolve(v.executeCommand);v.destroy()});v.show();return y};r.displayText=function(a,b,e,d,l){return r.displayHtml(u.textToHtml(a),b,e,d,l)};return r})},"xl/player/dialogs/ModalBaseDialog":function(){define(["dojo/_base/declare","./BaseDialog","dojo/topic"],function(c,d){return c("xl.player.dialogs.ModalBaseDialog ",
[d],{isModal:!0})})},"xl/util/higherEdUtils":function(){define(["xl/util/array","xl/util/stringUtils"],function(c,d){return{sentenceCaseLabels:function(a){a&&a.length&&c.forEach(a,function(a){a.label&&"string"===typeof a.label&&(a.label=d.sentenceCase(a.label))})}}})},"xl/player/actions/AlertAction":function(){define(["dojo/_base/declare","xl/util/logger","xl/util/stringUtils","xl/player/dialogs/ConfirmationDialog"],function(c,d,a,b){return c("xl.player.actions.AlertAction",null,{process:function(e,
d){var c=e.content,n=d.useSentenceCase?a.sentenceCase(e.title):e.title;n||(n="Alert");return b.displayHtml(c,n,[b.BUTTON.OK],e.width,"xlAlert")}})})},"xl/assignment/actions/UpdateResultAction":function(){define(["dojo/_base/declare"],function(c){return c("xl.assignment.actions.UpdateResultAction",null,{process:function(d,a){console.log("doing assignment UpdateResultAction");a.updateResult(d.correctness,d.score,d.scoreText)}})})},"xl/assignment/actions/ChangeLanguageAction":function(){define(["dojo/_base/declare",
"xl/util/localization"],function(c,d){return c("xl.assignment.actions.ChangeLanguageAction",null,{process:function(a,b){d.changeLocale(a.locale).then(function(){b.localeChanged({"@type":"ChangeLanguage",locale:a.locale})})}})})},"xl/assignment/actions/PrintAssignmentAction":function(){define(["dojo/_base/declare","xl/util/logger","dojo/Deferred"],function(c,d,a){return c("xl.assignment.actions.PrintAssignmentAction",null,{process:function(b,e){var c=new a;if(null!=e._printerWindow&&!e._printerWindow.closed&&
e.printerPlayer)return e.printerPlayer.printAll(b),c.resolve(!0),c;e.printerPlayer=null;e._printerWindow=window.open(b.url,"printer","location\x3dno,menubar\x3dno,resizable\x3dno,scrollbars\x3dyes,status\x3dno,toolbar\x3dno,height\x3d500,width\x3d650");if(null!=e._printerWindow&&!e._printerWindow.closed){var h=function(){e._printerWindow.printerPlayer?(e.printerPlayer=e._printerWindow.printerPlayer,e.printerPlayer.initialize({logger:d}),e.printerPlayer.printAll(b),c.resolve(!0)):setTimeout(h,100)};
setTimeout(h,100)}return c}})})},"xl/player/actions/SetupAnalyticsDimensionsAction":function(){define(["dojo/_base/declare","xl/util/ga"],function(c,d){return c("xl.player.actions.SetupAnalyticsDimensionsAction",null,{process:function(a){d.setupDimensions({dimension1:a.book,dimension2:a.theme,dimension3:a.machine,dimension4:a.playMode,dimension5:a.isReviewMode,dimension6:a.adaptiveMode,dimension7:a.isCustomQuestion,dimension8:a.userRole})}})})},"xl/assignment/actions/AssignmentOverviewAction":function(){define(["dojo/_base/declare"],
function(c){return c("xl.assignment.actions.AssignmentOverviewAction",null,{process:function(d,a){a.btnOverview.loadOverview(d)}})})},"xl/assignment/actions/InactivityTimeoutAction":function(){define(["dojo/_base/declare","xl/player/dialogs/ConfirmationDialog","xl/util/localization!html5player/popup"],function(c,d,a){return c("xl.assignment.actions.InactivityTimeoutAction",null,{process:function(b,e){console.log("doing assignment InactivityTimeoutAction");return d.displayText(b.message,a.alert,[d.BUTTON.OK])}})})},
"xl/assignment/actions/UpdateMasteryAction":function(){define(["dojo/_base/declare"],function(c){return c("xl.player.actions.UpdateMasteryAction",null,{process:function(d,a){d["@type"]="UpdateMastery";a._postPlayerMessage(d)}})})},"xl/assignment/actions/PlayerCommandAction":function(){define(["dojo/_base/declare"],function(c){return c("xl.assignment.actions.PlayerCommandAction",null,{process:function(d,a){d["@type"]="PlayerCommand";a._postPlayerMessage(d)}})})},"xl/assignment/actions/ChangeServerUrlAction":function(){define(["dojo/_base/declare"],
function(c){var d=location.protocol+"//"+location.host;return c("xl.assignment.actions.ChangeServerUrlAction",null,{process:function(a,b){var e=a.value;null!=e&&("/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),b.serviceUrl&&(b.serviceUrl="/"===b.serviceUrl[0]?e+b.serviceUrl:b.serviceUrl.replace(d,e)),d=e)}})})},"xl/assignment/actions/UpdateRemediationTitleAction":function(){define(["dojo/_base/declare"],function(c){return c("xl.assignment.actions.UpdateRemediationTitle",null,{process:function(d,a){a.labelRemediationTitle.innerHTML=
d.value.title;a.labelRemediationTitle.title=d.value.title;a.btnReturnToHW.set("label",d.value.buttonLabel);a.updateRemediationControls(d)}})})},"xl/assignment/actions/ShowOverviewAction":function(){define(["dojo/_base/declare"],function(c){return c("xl.assignment.actions.ShowOverviewAction",null,{process:function(d,a){a.showOverviewDisplay(d)}})})},"xl/assignment/actions/UpdateAttemptAction":function(){define(["dojo/_base/declare"],function(c){return c("xl.assignment.actions.UpdateAttemptAction",
null,{process:function(d,a){a.updateAttempt(d)}})})},"xl/player/PlayerMenu":function(){define("dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_HasDropDown dojo/Evented dijit/form/_FormWidgetMixin dojo/text!./templates/PlayerMenu.html dojo/_base/declare xl/util/logger dojo/topic dojo/has dojo/_base/kernel dojo/_base/config dijit/Menu dijit/MenuItem dijit/MenuSeparator".split(" "),function(c,d,a,b,e,f,h,n,m,k,g,q,t,u,p,s){return n("xl.player.PlayerMenu",[c,d,a,b,e,f],{templateString:h,
baseClass:"xlPlayerMenu",getPlayerVersion:function(){this.emit("commandSent","about",{dojoVersion:q.version.toString()})},loadAndOpenDropDown:function(){var a=this.inherited(arguments),b=this;a.then(function(){(g("ie")||g("trident"))&&setTimeout(function(){b.dropDown.focus()},100)});return a}})})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),
function(c,d,a,b,e,f,h,n,m,k,g,q,t,u,p,s){g("dijit-legacy-requires")&&s(0,function(){c(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return a("dijit.Menu",p,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):d.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return t.get(this._iframeContentDocument(a))||
this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(a){a=b.byId(a,this.ownerDocument);var d;if("iframe"==a.tagName.toLowerCase()){var c=a;d=this._iframeContentWindow(c);d=q.body(d.document)}else d=a==q.body(this.ownerDocument)?this.ownerDocument.documentElement:a;var g={node:a,
iframe:c};e.set(a,"_dijitMenu"+this.id,this._bindings.push(g));var h=m.hitch(this,function(a){var b=this.selector,e=b?function(a){return k.selector(b,a)}:function(a){return a},d=this;return[k(a,e(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();d._scheduleOpen(this,c,{x:a.pageX,y:a.pageY})}),k(a,e("keydown"),function(a){a.shiftKey&&a.keyCode==n.F10&&(a.stopPropagation(),a.preventDefault(),d._scheduleOpen(this,c))})]});g.connects=d?h(d):[];c&&(g.onloadHandler=
m.hitch(this,function(){var a=this._iframeContentWindow(c),a=q.body(a.document);g.connects=h(a)}),c.addEventListener?c.addEventListener("load",g.onloadHandler,!1):c.attachEvent("onload",g.onloadHandler))},unBindDomNode:function(a){var d;try{d=b.byId(a,this.ownerDocument)}catch(c){return}a="_dijitMenu"+this.id;if(d&&e.has(d,a)){for(var g=e.get(d,a)-1,h=this._bindings[g],k;k=h.connects.pop();)k.remove();(k=h.iframe)&&(k.removeEventListener?k.removeEventListener("load",h.onloadHandler,!1):k.detachEvent("onload",
h.onloadHandler));e.remove(d,a);delete this._bindings[g]}},_scheduleOpen:function(a,b,e){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:a,iframe:b,coords:e})},1))},_openMyself:function(a){function e(){y.refocus&&I&&I.focus();u.close(y)}var d=a.target,c=a.iframe;a=a.coords;var k=!a;this.currentTarget=d;if(a){if(c){var d=f.position(c,!0),p=this._iframeContentWindow(c),p=f.docScroll(p.document),s=h.getComputedStyle(c),m=h.toPixelValue,n=(g("ie")&&
g("quirks")?0:m(c,s.paddingLeft))+(g("ie")&&g("quirks")?m(c,s.borderLeftWidth):0),c=(g("ie")&&g("quirks")?0:m(c,s.paddingTop))+(g("ie")&&g("quirks")?m(c,s.borderTopWidth):0);a.x+=d.x+n-p.x;a.y+=d.y+c-p.y}}else a=f.position(d,!0),a.x+=10,a.y+=10;var y=this,c=this._focusManager.get("prevNode"),d=this._focusManager.get("curNode"),I=!d||b.isDescendant(d,this.domNode)?c:d;u.open({popup:this,x:a.x,y:a.y,onExecute:e,onCancel:e,orient:this.isLeftToRight()?"L":"R"});this.focus();k||this.defer(function(){this._cleanUp(!0)});
this._onBlur=function(){this.inherited("_onBlur",arguments);u.close(this)}},destroy:function(){d.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"xl/util/ioQuery":function(){define(["dojo/io-query","dojo/_base/lang"],function(c,d){var a={};d.mixin(a,c);a.urlToObject=function(a){a=a.split("?",2);var e={};e["@url"]=a[0];2==a.length&&d.mixin(e,c.queryToObject(a[1]));return e};a.objectToUrl=function(a){var e=a["@url"];a=d.mixin({},a);delete a["@url"];
(a=c.objectToQuery(a))&&(e+="?"+a);return e};a.addToQueryString=function(b,e,c){b=a.urlToObject(b);"string"==typeof e?b[e]=c:b=d.mixin(b,e);return a.objectToUrl(b)};return a})},"xl/assignment/_AssignmentPlayerBase":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/lang dojo/_base/unload dojo/_base/connect dojo/json dojo/dom-geometry dojo/Deferred dojo/dom-class dijit/_WidgetBase ../util/logger ../player/AssemblyInfo ../dijit-bootstrap/bootstrapUtils ../util/stringUtils ../player/dialogs/ConfirmationDialog xl/dijit/Standby xl/util/ga xl/util/standbyHandler xl/util/_CommandProcessor xl/util/array xl/util/localization!html5player/player xl/util/localization!html5player/assignment xl/util/localization!html5player/learningaids xl/util/localization!html5player/popup xl/util/gaLogger".split(" "),
function(c,d,a,b,e,f,h,n,m,k,g,q,t,u,p,s,l,v,r,z,C,D,E,x,K){h.boxModel="border-box";return c("xl.assignment._AssignmentPlayerBase",[k,r],{_hostFrame:null,serviceUrl:null,_correlationId:null,_session:null,_actionHandler:null,_postingCommand:null,_pendingCommands:null,_isAdaptive:!1,reviewMode:!1,previewMode:!1,title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},_pingTimer:null,_pingTimeout:900,_standbyIds:null,_modalIds:null,_stats:null,useSentenceCase:!1,constructor:function(){this._hostFrame=
window.parent;this._nodeResultRequests={};this._pendingCommands=[];this._standbyIds={};this._modalIds={};this.own(v.registerStandbyNotify(a.hitch(this,this._standbyToggled)),v.registerModalNotify(a.hitch(this,this._modalToggled)))},initialize:function(a){this._session=a.assignmentSession;a.correlationId&&(this._correlationId=a.correlationId)},_standbyToggled:function(a){this._toggleStandbyIndicator(a.state)},_modalToggled:function(){},_handleToggleStandby:function(a){var b=a.playerId;a.state?(a=this.startStandby(),
this._standbyIds[b]=a):(a=this._standbyIds[b],this.endStandby(a))},_handleToggleUI:function(a){var b=a.playerId;a.enableUI?(a=this._modalIds[b],this.endModal(a)):(a=this.startModal(),this._modalIds[b]=a)},closeAssignment:function(b){this._closeDeferred?this._promptToFinishDisplayed?this._closeDeferred.then(a.hitch(this,this._closeAssignment,b)):this._closeDeferred.then(a.hitch(this,function(){this.continueWorking&&this._continueTimeRemaining()?this._closeAssignment(b):this._showTimeoutPrompt().then(a.hitch(this,
this._closeAssignment,b))})):this._closeAssignment(b)},_closeAssignment:function(a){this._closeDeferred=null;this._disableTimeoutPopup=this._disableUnloadPrompt=!0;this.closeUrl?window.location=this.closeUrl:this._postHostMessage({"@context":"http://purl.org/pearson/paf/v1/ctx/core/Close","@type":"Close",arguments:a})},_isHomework:function(){return"Homework"===this.playMode},_isTest:function(){return"Test"===this.playMode},_isQuiz:function(){return this._isTest()&&this._quizMode},_notifyPlayerReady:function(){this._postHostMessage({"@context":"http://purl.org/pearson/paf/v1/ctx/core/PlayerReady",
"@type":"PlayerReady"})},_postHostMessage:function(a){null!=this._hostFrame&&this._hostFrame!==window&&this._hostFrame.postMessage(f.stringify(a),"*")},_playActions:function(a,b){return this._actionHandler.playActions(a,b)},_handleAssignmentAction:function(a){this._playActions([a.action],this)},_clearPendingCommands:function(a){z.forEach(this._pendingCommands,function(b){b.deferred.cancel(a)});this._pendingCommands=[]},_queueCommand:function(a,b,e){console.log("Queuing command:",a,b);console.log("--current command:",
this._postingCommand);this._pendingCommands.push({command:a,args:b,deferred:e})},_processQueuedCommands:function(){setTimeout(a.hitch(this,this._processNextPendingCommand),10)},_processNextPendingCommand:function(){if(this._postingCommand)0<this._pendingCommands.length&&console.warn("Attempting to process queued commands while still posting another command.  Ignore for now.");else{var a=this._pendingCommands.shift();a&&this.postCommand(a.command,a.args,a.deferred)}},startStandby:function(){return v.startStandby()},
endStandby:function(a){v.endStandby(a)},startModal:function(){return v.startModal()},endModal:function(a){v.endModal(a)},_isDuplicateCommand:function(a){return this._postingCommand&&this._postingCommand.command===a.command?"noderesult"===a.command?f.stringify(this._postingCommand.arguments)===f.stringify(a.arguments):!0:!1},postCommand:function(b,e,d){var c=d||new n,v={command:b,arguments:e};if(this._isDuplicateCommand(v))return console.warn("Duplicate command being ignored",v),c.reject("Duplicate command being ignored"),
c;if(this._postingCommand)return this._queueCommand(b,e,c),c;this._postingCommand=v;var l=this.startStandby(),g={command:b,arguments:e,session:this._session,correlationId:this._correlationId};this.startTime=(new Date).getTime();var r=this;this._post(this.serviceUrl,g).then(function(b){null==r._postingCommand?(console.warn("Previous post was canceled when attempting to post this one",g),c.cancel("post cancelled due to _postingCommand set to null"),r.endStandby(l),r._processQueuedCommands()):(r._postingCommand=
null,r._session=b.session,r._playActions(b.actions,r).then(function(){c.resolve(b.response);r.endStandby(l)}),r._processQueuedCommands(),r.emit("updated",{command:v,result:b}),K.logAssignmentEvent({command:g.command,data:a.mixin({startTime:r.startTime,reviewMode:r.reviewMode,playMode:r.playMode},e)}))},function(a){r._postingCommand=null;r._logError(a);c.reject(a.response);r.endStandby(l);r._processQueuedCommands()});return c},_logError:function(a){var b={},e=!0;try{b=f.parse(a.response.text)}catch(d){a.responseText&&
(b.errorMessage=a.responseText),e=!1}g.log(b.errorMessage||a.message,{error:a,severity:g.severity.Critical,guid:b.errorAuditGuid,serverName:b.serverName,category:g.category.General},e)},_setupUnload:function(){(this._isTest()||this._isHomework())&&(!this.reviewMode&&!this.previewMode)&&b.addOnUnload(a.hitch(this,this._onUnloaded))},_onUnloaded:function(a){if(!this._disableUnloadPrompt)return this._isAdaptive||this._requestItemNodeResult({command:"leaving"},!0),a.returnValue=D.unloadPrompt},initDisplay:function(a){this.playMode=
a.playMode;this._quizMode=a.isQuiz;this.titleNode&&this.set("title",this.getTitle(a));this.btnClose&&this.btnClose.set("label",a.closeButtonLabel);a.hideClose?this.btnClose&&m.add(this.btnClose.domNode,"hidden"):this.btnClose&&m.remove(this.btnClose.domNode,"hidden");this.latePolicyMessage=void 0!==a.latePolicyMessage?a.latePolicyMessage:"";this.hideCloseButton=a.hideClose;this.closeButtonLabel=a.closeButtonLabel;this.closeUrl=a.closeUrl;this.reviewMode=a.reviewMode;this.previewMode=a.previewMode;
this.showTime=a.showTime;this.showTimeLimit=108E5;this.timeInfo=a.timeInfo||{};this.useSentenceCase=a.style&&"highered"==a.style.toLowerCase();this.finalDueDateTime=null!=this.timeInfo.finalDueDate?Date.parse(this.timeInfo.finalDueDate):null;this.continueWorking=!1;this.autoRecordTime=a.autoRecordTime;this._stopAndResume=a.stopAndResume;this._oneAttemptMode=a.oneAttemptMode;this.timeInfo.timeExpired||this._startTimer();this._setupUnload();this._startPingTimer()},getTitle:function(b){var e=b.title;
b.reviewMode&&(e=a.replace("{0}  {1}",[E["la.review"],e]));return e},_autoRecord:function(){this._currentSequenceNodeId&&(this._requestItemNodeResult({},!0),this._lastAutoRecordTime=null)},_updateTimeDisplay:function(){this._shouldDisplayTimeRemaining()?this._displayTimeRemaining():this._removeTimeRemaining()},_shouldDisplayTimeRemaining:function(){return!this.reviewMode&&!this._isHomework()&&!this._workingUntimedAssignmentAfterInitialDueDateWithDistantFinalDueDate()},_removeTimeRemaining:function(){this._updateTime({TimeLabel:"",
TimeStr:""});this.timeInfoSpan&&t.hide(this.timeInfoSpan)},_showTimeRemaining:function(){this.timeInfoSpan&&!t.getVisible(this.timeInfoSpan)&&t.show(this.timeInfoSpan)},_displayTimeRemaining:function(){0>=this.timeInfo.timeLimit||(this._populateTimeLabelAndValue(),this._showTimeRemaining())},_populateTimeLabelAndValue:function(){var a,b;this.showTime?(a=u.formatTimeSpan(this._timeRemaining()),b=C["info.time_remaining_label"]):(a=u.formatTimeSpan(this.timeInfo.timeLimit),b=C["info.time_limit_label"]);
this._updateTime({TimeLabel:b,TimeStr:a})},_workingUntimedAssignmentAfterInitialDueDateWithDistantFinalDueDate:function(){return 0===this.timeInfo.totalTimeAllowed&&(this._timerContinueOrFinishDialogShowing||this.continueWorking)&&this._finalDueDateOutsideLimit(this.showTimeLimit)},_finalDueDateOutsideLimit:function(a){return null!==this.finalDueDateTime&&(0===this.finalDueDateTime||this.finalDueDateTime-this._currentTime()>a)},_currentTime:function(){return Date.now()},_startTimer:function(){if(null==
this._testTimer){var b=this._currentTime();null==this._loadTime&&(this._loadTime=b);null==this._lastAutoRecordTime&&(this._lastAutoRecordTime=b);this._testTimer=setTimeout(a.hitch(this,this._processTimer),1E3)}},_processTimer:function(){this._testTimer=null;if(!this.reviewMode){if(this._isTest()){if(this.showTime&&this._updateTimeDisplay(),this._checkTimeout())return}else if(this._isHomework()&&this._checkTimeout())return;this._startTimer()}},_startPingTimer:function(){null==this._pingTimer&&(this._pingTimer=
setTimeout(a.hitch(this,this._processPingTimer),1E3*this._pingTimeout))},_processPingTimer:function(){this._pingTimer=null;var a=this;this.postCommand("pingsession",null).then(function(){a._startPingTimer()})},_getTimeStr:function(b){var e=Math.floor(b/60);b=Math.round(b-60*e);var d="";0<e&&(d=a.replace(1<e?x.minutes:x.minute,[e.toString()]));if(0===e&&0<=b||0<b)0<d.length&&(d+=" "),d+=a.replace(1<b||0===b?x.seconds:x.second,[b.toString()]);return d},_canDisplayTimeoutPopup:function(){return!this._disableTimeoutPopup&&
!this._standbyDisplayed&&!this._processingNodeResultResponse&&!this._loadingSequenceNodeId},_shouldDisplayTimoutWarningPopup:function(a){return this._canDisplayTimeoutPopup()&&!this._timerWarningDialogShown&&0<this.timeInfo.warningLimit&&a<=this.timeInfo.warningLimit},_checkTimeout:function(){var a=this._timeRemaining();if(0<this.timeInfo.timeLimit&&0>=a)return this._showTimeExpiredPrompt();if(this._shouldDisplayTimoutWarningPopup(a)&&!this._timerDialogShowing)return this._showWarningTimeout();this.shouldAutoRecord()&&
!this._timerDialogShowing&&this._autoRecord();return!1},_isTimeUp:function(){var a=this._currentTime(),b=this.timeInfo.totalTimeAllowed,e=this.timeInfo.timeSpent+(a-this._loadTime)/1E3;return this.timeInfo.timeLimit<=e&&null===this.finalDueDateTime||b&&e>b||0!==this.finalDueDateTime&&this.finalDueDateTime<=a},_showTimeExpiredPrompt:function(){var a=this._isTimeUp();if(this._timerDialogShowing||this._timerContinueOrFinishDialogShowing)return a?(this._finishAssignment(),!0):!1;if(!this._canDisplayTimeoutPopup())return!1;
a?this._promptToFinish():this.continueWorking?this._startTimer():this._promptToContinueOrFinish();return!0},_showWarningTimeout:function(){var b=this;this._timerWarningDialogShown=this._timerDialogShowing=!0;this._prepareCloseDeferred();this._startTimer();p.displayText(a.replace(x.times_up_warning,[this._getTimeStr(this.timeInfo.warningLimit)]),x.warning,[p.BUTTON.OK]).then(function(){b._timerDialogShowing=!1;b._closeDeferred.resolve()});return!0},_promptToContinueOrFinish:function(){var b=this._continueOrFinish.bind(this);
this._timerContinueOrFinishDialogShowing=this._timerDialogShowing=!0;this._prepareCloseDeferred();this._continueTimeRemaining();this._startTimer();this._requestItemNodeResult({},!0);var e=[{command:"finish",label:a.replace(x.submit_assignment_type,[this.playMode])}];this._isTest()&&e.push({command:"continueWorking",label:x.continue_working});p.displayText(x.times_up_continue.concat(" ",[this.latePolicyMessage]," ",x.prompt_continue_working),x.warning,e).then(b)},_continueOrFinish:function(a){if(this._isTimeUp())this._timerContinueOrFinishDialogShowing=
this._timerDialogShowing=!1,this._closeDeferred.resolve();else{"finish"===a.command&&(this._promptToFinishDisplayed=!0);var b=this;this.postCommand(a.command,{skipCompleteCheck:!0}).then(function(){b._timerDialogShowing=!1;b._timerContinueOrFinishDialogShowing=!1;b._closeDeferred.resolve()})}},_continueTimeRemaining:function(){var a=this._currentTime();this.timeInfo.timeLeft+=Math.min(this.finalDueDateTime?(this.finalDueDateTime-a)/1E3:Number.MAX_VALUE,this.timeInfo.totalTimeAllowed?this.timeInfo.totalTimeAllowed-
(this.timeInfo.timeSpent+(a-this._loadTime)/1E3):Number.MAX_VALUE);return this.timeInfo.timeLeft},_prepareCloseDeferred:function(){this._closeDeferred&&!this._closeDeferred.isResolved()&&this._closeDeferred.resolve();this._closeDeferred=new n},_promptToFinish:function(){this._promptToFinishDisplayed=!0;this._prepareCloseDeferred();this._finishAssignment();this._timerDialogShowing=!0;var a=this;this._showTimeoutPrompt().then(function(){a._closeDeferred.resolve()})},_showTimeoutPrompt:function(){var a=
this;return p.displayText(x["times_up_submit"+(this._isHomework()?"_hw":"")],x.warning,[p.BUTTON.OK]).then(function(){a._timerDialogShowing=!1})},_finishAssignment:function(){this._requestItemNodeResult({command:"finish",commandArgs:{skipCompleteCheck:!0}},!0)},shouldAutoRecord:function(){return this.autoRecordTime&&0<this.autoRecordTime&&this._currentTime()-this._lastAutoRecordTime>1E3*this.autoRecordTime},_timeRemaining:function(){var a=0;null!=this._loadTime&&(a=(this._currentTime()-this._loadTime)/
1E3);return Math.max(this.timeInfo.timeLeft-a,0)},_handleNodeResultResponse:function(a){var b={},e=a.originalMsgId,d=a.requestedResult;if(e){b=this._nodeResultRequests[e];if(!b){console.error("RequestNodeResult message for messageId "+e+" can not be found.");return}delete this._nodeResultRequests[e];if(null!=d&&b.sequenceNodeId!==d.ownerNode){console.error("NodeResult contains a sequenceNode that does not match requested sequenceNode");console.error("--expected:",b);console.error("--returned:",d);
return}b=b.reason}this._stats&&(a.currentQuestion=this._stats.currentQuestion);this._postHostMessage(a);if("leaving"!==b.command){e&&(this._processingNodeResultResponse=!0);var c=this;this.postCommand("noderesult",{nodeResult:d,command:b.command,commandArgs:b.commandArgs,statusCode:a.statusCode,statusMessage:a.statusMessage}).then(function(){c._processingNodeResultResponse=!1})}},_handleSubmitGrade:function(a){this.postCommand("submitgrade",{url:a.info.gradeEssayUrl,score:a.info.score})},updateResult:function(a,
b){this._postPlayerMessage({"@type":"UpdateResult",correctness:a,score:b})},_updateTime:function(a){this.timeLabel.innerHTML=a.TimeLabel;this.timeValue.innerHTML=a.TimeStr;this._postPlayerMessage({"@type":"UpdateTime",timeData:a})},_initStandbyIndicator:function(){this.standbyDijit=new s({target:this.id,duration:0});document.body.appendChild(this.standbyDijit.domNode);this.standbyDijit.startup()},_standbyDisplayed:!1,_toggleStandbyIndicator:function(a){a!==this._standbyDisplayed&&(this._standbyDisplayed=
a,this.standbyDijit||this._initStandbyIndicator(),!0===a?this.standbyDijit.show():this.standbyDijit.hide())},showOverviewDisplay:function(){},updateAttempt:function(){}})})},"xl/dijit-bootstrap/bootstrapUtils":function(){define(["dojo/dom-class"],function(c){var d={setVisible:function(a,b){a.domNode&&(a=a.domNode);b?c.remove(a,"hidden"):c.add(a,"hidden")},getVisible:function(a){a.domNode&&(a=a.domNode);return!c.contains(a,"hidden")},hide:function(a){d.setVisible(a,!1)},show:function(a){d.setVisible(a,
!0)}};return d})},"xl/dijit/Standby":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/window dojo/_base/window dojo/_base/fx dojo/fx dijit/_Widget dijit/_TemplatedMixin dijit/registry".split(" "),function(c,d,a,b,e,f,h,n,m,k,g,q,t,u,p,s,l){return d("xl.dijit.Standby",[p,s],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",
text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:0.15,imageOpacity:1,templateString:'\x3cdiv class\x3d"xlStandby" aria-role\x3d"status" aria-live\x3d"polite"\x3e\x3cdiv class\x3d"xlStandbyUnderlay" style\x3d"display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint\x3d"_underlayNode"\x3e\x3c/div\x3e\x3cimg class\x3d"xlStandbyImage" src\x3d"${image}" style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint\x3d"_imageNode"\x3e\x3cdiv class\x3d"xlStandbyText" style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint\x3d"_textNode"\x3e\x3c/div\x3e\x3c/div\x3e',
_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(a){if(!this._started){if("string"===typeof this.target){var b=l.byId(this.target);this.target=b?b.domNode:f.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text);"image"===this.centerIndicator?(this._centerNode=this._imageNode,h.set(this._imageNode,"src",this.image),h.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode;k.set(this._underlayNode,
{display:"none",backgroundColor:this.color});k.set(this._centerNode,"display","none");this.connect(this._underlayNode,"onclick","_ignore");this.domNode.parentNode&&this.domNode.parentNode!=q.body()&&q.body().appendChild(this.domNode);7==e("ie")&&(this._ieFixNode=n.create("div"),k.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),q.body().appendChild(this._ieFixNode));this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),
this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){this._displayed&&(this._anim&&(this._anim.stop(),delete this._anim),this._size(),this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null))},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1;this._resizeCheck&&clearInterval(this._resizeCheck);k.set(this._centerNode,"display",
"none");k.set(this._underlayNode,"display","none");7==e("ie")&&this._ieFixNode&&(q.body().removeChild(this._ieFixNode),delete this._ieFixNode);this._anim&&(this._anim.stop(),delete this._anim);this._centerNode=this._textNode=this._imageNode=this.target=null;this.inherited(arguments)},_size:function(){if(this._displayed){var a=h.get(q.body(),"dir");a&&(a=a.toLowerCase());var b,d=this._scrollerWidths(),c=this.target,l=k.get(this._centerNode,"display");k.set(this._centerNode,"display","block");var f=
m.position(c,!0);if(c===q.body()||c===q.doc)f=g.getBox(),f.x=f.l,f.y=f.t;var u=m.getMarginBox(this._centerNode);k.set(this._centerNode,"display",l);this._ieFixNode&&(b=-this._ieFixNode.offsetTop/1E3,f.x=Math.floor((f.x+0.9)/b),f.y=Math.floor((f.y+0.9)/b),f.w=Math.floor((f.w+0.9)/b),f.h=Math.floor((f.h+0.9)/b));var p=k.get(c,"zIndex"),s=l=p;if("auto"===this.zIndex)if("auto"!=p)l=parseInt(l,10)+1,s=parseInt(s,10)+2;else{var n=c.parentNode;for(b=-1E5;n&&n!==q.body();){if((p=k.get(n,"zIndex"))&&"auto"!==
p)p=parseInt(p,10),b<p&&(b=p,l=p+1,s=p+2);n=n.parentNode}}else l=parseInt(this.zIndex,10)+1,s=parseInt(this.zIndex,10)+2;k.set(this._centerNode,"zIndex",s);k.set(this._underlayNode,"zIndex",l);if((l=c.parentNode)&&l!==q.body()&&c!==q.body()&&c!==q.doc){n=f.h;s=f.w;c=m.position(l,!0);this._ieFixNode&&(b=-this._ieFixNode.offsetTop/1E3,c.x=Math.floor((c.x+0.9)/b),c.y=Math.floor((c.y+0.9)/b),c.w=Math.floor((c.w+0.9)/b),c.h=Math.floor((c.h+0.9)/b));"rtl"===a&&(e("opera")?(f.x+=l.scrollHeight>l.clientHeight&&
0<l.clientHeight?d.v:0,c.x+=l.scrollHeight>l.clientHeight&&0<l.clientHeight?d.v:0):e("ie")?c.x+=l.scrollHeight>l.clientHeight&&0<l.clientHeight?d.v:0:e("webkit"));c.w<f.w&&(f.w-=c.w);c.h<f.h&&(f.h-=c.h);var t=c.y,F=c.y+c.h,B=f.y,G=f.y+n,a=c.x;b=c.x+c.w;var p=f.x,H=f.x+s;if(G>t&&B<t)f.y=c.y,n-=t-B,f.h=n<c.h?n:f.h-2*(l.scrollWidth>l.clientWidth&&0<l.clientWidth?d.h:0);else if(B<F&&G>F)f.h=F-B;else if(G<=t||B>=F)f.h=0;if(H>a&&p<a)f.x=c.x,s-=a-p,f.w=s<c.w?s:f.w-2*(l.scrollHeight>l.clientHeight&&0<l.clientHeight?
d.w:0);else if(p<b&&H>b)f.w=b-p;else if(H<=a||p>=b)f.w=0}0<f.h&&0<f.w?(k.set(this._underlayNode,{display:"block",width:f.w+"px",height:f.h+"px",top:f.y+"px",left:f.x+"px"}),d=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"],this._cloneStyles(d),e("ie")||(d="MozBorderRadius MozBorderRadiusTopleft MozBorderRadiusTopright MozBorderRadiusBottomleft MozBorderRadiusBottomright WebkitBorderRadius WebkitBorderTopLeftRadius WebkitBorderTopRightRadius WebkitBorderBottomLeftRadius WebkitBorderBottomRightRadius".split(" "),
this._cloneStyles(d,this)),d=f.h/2-u.h/2,l=f.w/2-u.w/2,this.topAlignIndicator&&(d=0),f.h>=u.h&&f.w>=u.w?k.set(this._centerNode,{top:d+f.y+"px",left:l+f.x+"px",display:"block"}):k.set(this._centerNode,"display","none")):(k.set(this._underlayNode,"display","none"),k.set(this._centerNode,"display","none"));if(null===this._resizeCheck){var J=this;this._resizeCheck=setInterval(function(){J._size()},100)}}},_cloneStyles:function(b){a.forEach(b,function(a){k.set(this._underlayNode,a,k.get(this.target,a))},
this)},_fadeIn:function(){var a=this,b=t.animateProperty({duration:a.duration,node:a._underlayNode,properties:{opacity:{start:0,end:a.opacity}}}),e=t.animateProperty({duration:a.duration,node:a._centerNode,properties:{opacity:{start:0,end:a.imageOpacity}},onEnd:function(){a.onShow();delete a._anim}});this._anim=u.combine([b,e]);this._anim.play()},_fadeOut:function(){var a=this,b=t.animateProperty({duration:a.duration,node:a._underlayNode,properties:{opacity:{start:a.opacity,end:0}},onEnd:function(){k.set(this.node,
{display:"none",zIndex:"-1000"})}}),e=t.animateProperty({duration:a.duration,node:a._centerNode,properties:{opacity:{start:a.imageOpacity,end:0}},onEnd:function(){k.set(this.node,{display:"none",zIndex:"-1000"});a.onHide();a._enableOverflow();delete a._anim}});this._anim=u.combine([b,e]);this._anim.play()},_ignore:function(a){a&&b.stop(a)},_scrollerWidths:function(){var a=n.create("div");k.set(a,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",
padding:"0px",margin:"0px"});var b=n.create("div");k.set(b,{width:"200px",height:"10px"});a.appendChild(b);q.body().appendChild(a);b=m.getContentBox(a);k.set(a,"overflow","scroll");var e=m.getContentBox(a);q.body().removeChild(a);return{v:b.w-e.w,h:b.h-e.h}},_setTextAttr:function(a){this.text=this._textNode.innerHTML=a},_setColorAttr:function(a){k.set(this._underlayNode,"backgroundColor",a);this.color=a},_setImageTextAttr:function(a){h.set(this._imageNode,"alt",a);this.imageText=a},_setImageAttr:function(a){h.set(this._imageNode,
"src",a);this.image=a},_setCenterIndicatorAttr:function(a){this.centerIndicator=a;"image"===a?(this._centerNode=this._imageNode,k.set(this._textNode,"display","none")):(this._centerNode=this._textNode,k.set(this._imageNode,"display","none"))},_disableOverflow:function(){if(this.target===q.body()||this.target===q.doc){this._overflowDisabled=!0;var a=q.body();this._oldOverflow=a.style&&a.style.overflow?k.get(a,"overflow"):"";if(e("ie")&&!e("quirks")){if(a.parentNode&&a.parentNode.style&&a.parentNode.style.overflow)this._oldBodyParentOverflow=
a.parentNode.style.overflow;else try{this._oldBodyParentOverflow=k.get(a.parentNode,"overflow")}catch(b){this._oldBodyParentOverflow="scroll"}k.set(a.parentNode,"overflow","hidden")}k.set(a,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var a=q.body();e("ie")&&!e("quirks")&&(a.parentNode.style.overflow=this._oldBodyParentOverflow,delete this._oldBodyParentOverflow);k.set(a,"overflow",this._oldOverflow);if(e("webkit")){var b=n.create("div",
{style:{height:"2px"}});a.appendChild(b);setTimeout(function(){a.removeChild(b)},0)}delete this._oldOverflow}}})})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(c,d,a,b,e,f,h,n,m,k,g){a.isAsync||k(0,function(){g(["./fx/Toggler"])});a=a.fx={};k={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}};var q=function(a){this._index=-1;this._animations=a||[];this._current=
this._onAnimateCtx=this._onEndCtx=null;this.duration=0;b.forEach(this._animations,function(a){this.duration+=a.duration;a.delay&&(this.duration+=a.delay)},this)};q.prototype=new d;c.extend(q,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=e.after(this._current,
"onAnimate",c.hitch(this,"_onAnimate"),!0),this._onEndCtx=e.after(this._current,"onEnd",c.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(a,b){this._current||(this._current=this._animations[this._index=0]);if(!b&&"playing"==this._current.status())return this;var d=e.after(this._current,"beforeBegin",c.hitch(this,function(){this._fire("beforeBegin")}),!0),l=e.after(this._current,"onBegin",c.hitch(this,function(a){this._fire("onBegin",arguments)}),!0),f=e.after(this._current,"onPlay",
c.hitch(this,function(a){this._fire("onPlay",arguments);d.remove();l.remove();f.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=e.after(this._current,"onAnimate",c.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=e.after(this._current,"onEnd",c.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=e.after(this._current,"onPause",c.hitch(this,function(b){this._fire("onPause",
arguments);a.remove()}),!0);this._current.pause()}return this},gotoPercent:function(a,e){this.pause();var c=this.duration*a;this._current=null;b.some(this._animations,function(a){if(a.duration<=c)return this._current=a,!0;c-=a.duration;return!1});this._current&&this._current.gotoPercent(c/this._current.duration,e);return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var b=
e.after(this._current,"onStop",c.hitch(this,function(a){this._fire("onStop",arguments);b.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});c.extend(q,k);a.chain=function(a){return new q(a)};var t=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=0;b.forEach(a,function(a){var b=a.duration;
a.delay&&(b+=a.delay);this.duration<b&&(this.duration=b);this._connects.push(e.after(a,"onEnd",c.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new f.Animation({curve:[0,1],duration:this.duration});var d=this;b.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(a){d._connects.push(e.after(d._pseudoAnimation,a,function(){d._fire(a,arguments)},!0))})};c.extend(t,{_doAction:function(a,e){b.forEach(this._animations,function(b){b[a].apply(b,e)});return this},
_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var e=this._pseudoAnimation;e[a].apply(e,b)},play:function(a,b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(a,e){var c=this.duration*a;b.forEach(this._animations,function(a){a.gotoPercent(a.duration<c?1:c/a.duration,e)});this._call("gotoPercent",
arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){b.forEach(this._connects,function(a){a.remove()})}});c.extend(t,k);a.combine=function(a){return new t(a)};a.wipeIn=function(a){var b=a.node=h.byId(a.node),d=b.style,l;a=f.animateProperty(c.mixin({properties:{height:{start:function(){l=d.overflow;d.overflow="hidden";if("hidden"==d.visibility||"none"==d.display)return d.height=
"1px",d.display="",d.visibility="",1;var a=n.get(b,"height");return Math.max(a,1)},end:function(){return b.scrollHeight}}}},a));var g=function(){d.height="auto";d.overflow=l};e.after(a,"onStop",g,!0);e.after(a,"onEnd",g,!0);return a};a.wipeOut=function(a){var b=(a.node=h.byId(a.node)).style,d;a=f.animateProperty(c.mixin({properties:{height:{end:1}}},a));e.after(a,"beforeBegin",function(){d=b.overflow;b.overflow="hidden";b.display=""},!0);var l=function(){b.overflow=d;b.height="auto";b.display="none"};
e.after(a,"onStop",l,!0);e.after(a,"onEnd",l,!0);return a};a.slideTo=function(a){var b=null,d=null,l=function(a){return function(){var e=n.getComputedStyle(a),c=e.position;b="absolute"==c?a.offsetTop:parseInt(e.top)||0;d="absolute"==c?a.offsetLeft:parseInt(e.left)||0;"absolute"!=c&&"relative"!=c&&(e=m.position(a,!0),b=e.y,d=e.x,a.style.position="absolute",a.style.top=b+"px",a.style.left=d+"px")}}(a.node=h.byId(a.node));l();a=f.animateProperty(c.mixin({properties:{top:a.top||0,left:a.left||0}},a));
e.after(a,"beforeBegin",l,!0);return a};return a})},"xl/util/_CommandProcessor":function(){define("dojo/_base/declare dojo/_base/xhr dojo/_base/json dojo/_base/lang xl/player/AssemblyInfo dojo/_base/config xl/util/stringUtils xl/util/correlationIdUtil xl/util/logger xl/util/clientRequestErrorLogger".split(" "),function(c,d,a,b,e,f,h,n,m,k){return c("_CommandProcessor",null,{_post:function(c,h,m){h||(h={});h.command&&("/"!==c[c.length-1]&&(c+="/"),c+="command/"+h.command);200<c.length&&(c=c.substr(0,
200));m=b.mixin(m,{"Content-Type":"application/json",Accept:"application/json"});n.addCorrelationIdFromArgs(m,h);h.clientVersion=e;var u=a.toJson(h);"null"===u&&(u=a.toJson(b.mixin({},h)));var p=m[n.getCorrelationHeaderName()];return d.post({url:c,postData:u,handleAs:"json",headers:m,timeout:f.clientTimeout,withCredentials:!0,error:function(a){return k.LogError(a,p)}})}})})},"xl/util/correlationIdUtil":function(){define(["dojo/_base/lang","dojo/json","xl/util/stringUtils"],function(c,d,a){var b={getCorrelationHeaderName:function(){return"correlation-id"}},
e=function(a,e){var d=b.getCorrelationHeaderName();if(e[d])e[d]=a;else{var m={};m[d]=a;e=c.mixin(e,m)}return e};b.addCorrelationId=function(d){var c="",c=b.getCorrelationHeaderName();if(d&&d[c])return d;c="tdx-cli:".concat(a.guid());return e(c,d)};b.addCorrelationIdFromArgs=function(d,c){var n=b.getCorrelationHeaderName(),m="";if(d&&d[n])return d;m=c.correlationId?c.correlationId:"tdx-cli:".concat(a.guid());return e(m,d)};return b})},"xl/util/clientRequestErrorLogger":function(){define(["xl/util/logger"],
function(c){return{LogError:function(d,a){var b={requestCorrelationId:a,category:c.category.ClientRequest,severity:c.severity.Critical,status:0,url:null};if(void 0!=d.status){b.status=d.status;d.response&&(b.url=d.response.url);if(0===d.status||408===d.status)b.severity=c.severity.Timeout,c.log(d.message,b,!1),d.response&&(d.response=null,d.status=8E3);500<=d.status&&600>d.status&&(b.severity=504===d.status?c.severity.Timeout:c.severity.Critical,c.log(d.message,b,!1),d.response&&(d.response=null,
d.status=8E3))}return d}}})},"xl/util/gaLogger":function(){define(["dojo/_base/declare","xl/util/ga"],function(c,d){return new (c("xl.util.gaLogger",null,{_problemType:"",_isMedia:!1,_contentName:"",logProblemEvent:function(a){if(a.command){var b,e,c=a.label?a.label:this._IsMedia?this._ContentName:this._ProblemType,h=0;"initial"===a.command?b=this._IsMedia?"MediaInitialCommand":"ProblemInitialCommand":"learningaid"===a.command?b="LearningAid."+a.arguments.data:(e=this.logToGoogleCommands.get(a.command.toLowerCase()))&&
(b=e);e=a.category?a.category:"initial"===a.command?this._IsMedia?"MediaLoaded":"ProblemLoaded":this._IsMedia?"MediaInteraction":"ProblemInteraction";a.startTime&&(h=(new Date).getTime()-a.startTime);e&&b&&d.sendEvent(e,b,c,h)}},logAssignmentEvent:function(a){if(a.command){var b,e,c=a.label?a.label:"assignment."+a.data.playMode.toLowerCase(),h=0;if("initial"===a.command)b="AssignmentInitialCommand";else if("noderesult"===a.command)a.data&&(a.data.command&&a.data.commandArgs)&&(b=a.data.commandArgs.eventAction,
c=null,"remediation"===a.data.command?e=a.data.reviewMode?"RemediationReviewEnter":"RemediationEnter":"loadsequencenode"===a.data.command?e="RemediationStayed":"reloadquestion"===a.data.command&&(e=a.data.reviewMode?"RemediationReviewExit":"RemediationExit"));else{var n=this.logToGoogleCommands.get(a.command.toLowerCase());n&&(b=n)}e=e||a.category||("initial"==a.command?"AssignmentLoaded":"AssignmentInteraction");a.startTime&&(h=(new Date).getTime()-a.startTime);e&&b&&d.sendEvent(e,b,c,h)}},setProblemInfo:function(a,
b,c){this._problemType=a;this._isMedia=b;this._contentName=c},logToGoogleCommands:new Map([["about","AboutCommand"],["applycorrectanswer","ApplyCorrectAnswerCommand"],["assignmentinitial","AssignmentInitialCommand"],["changeaccessibility","ChangeAccessibilityCommand"],["changelanguage","ChangeLanguageCommand"],["changeuseosk","ChangeUseOskCommand"],["checkanswer","CheckAnswerCommand"],["clearall","ClearAllCommand"],["confirmrecord","ConfirmRecordCommand"],["containerinitial","ContainerInitialCommand"],
["continue","ContinueCommand"],["continueworking","ContinueWorkingCommand"],["displaydatagrapher","DisplayDataGrapherCommand"],["donewversion","DoNewVersionCommand"],["download","DownloadCommand"],["errortryagain","ErrorTryAgainCommand"],["essayanswer","EssayAnswerCommand"],["fakeaction","FakeActionCommand"],["finish","FinishCommand"],["getinputfeedback","GetInputFeedbackCommand"],["getpopupstepcontent","GetPopupStepContentCommand"],["getreviewdata","GetReviewDataCommand"],["gettdxinfo","GetTdxInfoCommand"],
["gettincanmessage","GetTinCanMessageCommand"],["giveup","GiveUpCommand"],["gototab","GotoTabCommand"],["grammarapplycheckanswer","GrammarApplyCheckAnswerCommand"],["grammarapplygetanswer","GrammarApplyGetAnswerCommand"],["grammarapplyhint","GrammarApplyHintCommand"],["graphzoom","GraphZoomCommand"],["headerbutton","HeaderButton"],["help","HelpCommand"],["hintopen","HintOpenCommand"],["hintsopen","HintsOpenCommand"],["holdsteptoggle","HoldStepToggleCommand"],["inactivitytimeoutdialog","InactivityTimeoutDialogCommand"],
["inactivitytimeoutreset","InactivityTimeoutResetCommand"],["interactionanimateplot","InteractionAnimatePlotCommand"],["interactionplotmarker","InteractionPlotMarkerCommand"],["interactionreset","InteractionResetCommand"],["learningaid.addcomment","LearningAid.addcomment"],["learningaid.addinstructortip","LearningAid.addinstructortip"],["learningaid.animation","LearningAid.animation"],["learningaid.askinstructor","LearningAid.askinstructor"],["learningaid.calculateexcel","LearningAid.calculateexcel"],
["learningaid.calculator","LearningAid.calculator"],["learningaid.conceptbook","LearningAid.conceptbook"],["learningaid.connecttotutor","LearningAid.connecttotutor"],["learningaid.demodoc","LearningAid.demodoc"],["learningaid.econspreadsheet","LearningAid.econspreadsheet"],["learningaid.example","LearningAid.example"],["learningaid.extrahelp","LearningAid.extrahelp"],["learningaid.financialcalc","LearningAid.financialcalc"],["learningaid.flashcards","LearningAid.flashcards"],["learningaid.glossary",
"LearningAid.glossary"],["learningaid.grapher","LearningAid.grapher"],["learningaid.guidedlecture","LearningAid.guidedlecture"],["learningaid.guidedsolution","LearningAid.guidedsolution"],["learningaid.instructortip","LearningAid.instructortip"],["learningaid.mathtools","LearningAid.mathtools"],["learningaid.morehelp","LearningAid.morehelp"],["learningaid.powerpoint","LearningAid.powerpoint"],["learningaid.print","LearningAid.print"],["learningaid.review","LearningAid.review"],["learningaid.showwork",
"LearningAid.showwork"],["learningaid.spreadsheet","LearningAid.spreadsheet"],["learningaid.statcrunch","LearningAid.statcrunch"],["learningaid.suggestionbox","LearningAid.suggestionbox"],["learningaid.techhelp","LearningAid.techhelp"],["learningaid.templates","LearningAid.templates"],["learningaid.textbook","LearningAid.textbook"],["learningaid.textbookextras","LearningAid.textbookextras"],["learningaid.video","LearningAid.video"],["learningaid.viewcomment","LearningAid.viewcomment"],["loadguidedsolution",
"LoadGuidedSolutionCommand"],["loadinitialvalues","LoadInitialValuesCommand"],["loadoverridevalues","LoadOverrideValuesCommand"],["loadquestion","LoadQuestionCommand"],["loadquestions","LoadQuestionsCommand"],["loadreviewdata","LoadReviewDataCommand"],["loadsequencenode","LoadSequenceNodeCommand"],["mediainitial","MediaInitialCommand"],["medianoderesult","MediaNodeResultCommand"],["noncefailure","NonceFailureCommand"],["openexcel","OpenExcelCommand"],["openstatcrunch","OpenStatCrunchCommand"],["overview",
"OverviewCommand"],["print","PrintCommand"],["probleminitial","ProblemInitialCommand"],["reloadquestion","ReloadQuestionCommand"],["reloadtdxinfo","ReloadTdxInfoCommand"],["remediationincorrect","RemediationIncorrect"],["resetdatagrapher","ResetDataGrapherCommand"],["returntohomeworkheaderbutton","ReturnToHomeworkHeaderButton"],["saveforlater","SaveForLaterCommand"],["setshowworkdata","SetShowWorkDataCommand"],["showalttexttoggle","ShowAltTextToggleCommand"],["showanswer","ShowAnswerCommand"],["showcompletedproblem",
"ShowCompletedProblemCommand"],["showoverridevalues","ShowOverrideValuesCommand"],["showworkread","ShowWorkReadCommand"],["similarexercise","SimilarExerciseCommand"],["similarexercisereview","SimilarExerciseReviewCommand"],["skipstep","SkipStepCommand"],["skiptoend","SkipToEndCommand"],["startover","StartOverCommand"],["submitgrade","SubmitGradeCommand"],["getproblemstate","GetProblemStateCommand"]])}))})},"xl/dijit/_FullHeight":function(){define("dojo/_base/declare dojo/_base/lang dojo/window dojo/dom-style dijit/Destroyable dojo/on dojo/has dijit/Viewport dojo/topic".split(" "),
function(c,d,a,b,e,f,h,n,m){return c("xl.dijit._FullHeight",[e],{fullHeightEnabled:!0,offsetHeight:0,orientationChanged:!1,viewPortResizeCount:0,startup:function(){this._started||(this.inherited(arguments),this._adjustHeight())},getWindowBox:function(){return a.getBox()},getMinHeight:function(){return 0},getWindowHeight:function(){return Math.max(a.getBox().h,this.getMinHeight())},getWindowWidth:function(){return a.getBox().w},heightAdjusted:function(a){},_adjustHeight:function(){if(this.fullHeightEnabled&&
this.domNode){var a=this.getWindowHeight();this.resize?this.resize({h:a}):(b.set(this.domNode,{height:a+"px"}),window.document.body.scrollTop=0);this.heightAdjusted(a)}},_queueAdjustHeight:function(a){setTimeout(d.hitch(this,function(){this.viewPortResizeCount===a&&this._adjustHeight()}),500)},postCreate:function(){this.inherited(arguments);!h("android")&&!h("ios")&&this.own([n.on("resize",d.hitch(this,function(a){this.viewPortResizeCount+=1;this._queueAdjustHeight(this.viewPortResizeCount)}))]);
(h("android")||h("ios"))&&this.own([n.on("resize",d.hitch(this,function(a){this.orientationChanged&&(this._adjustHeight(),this.orientationChanged=!1)}))]);this.own([f(window,"orientationchange",d.hitch(this,function(a){this.orientationChanged=!0;var b=null;"undefined"!=typeof event?b=event:"undefined"!=typeof a&&(b=a);this._adjustHeight();this.fullHeightEnabled&&window.scrollTo(0,0);m.publish("fullHeightOrientationChanged",b)}))])}})})},"xl/dijit/AssignmentReviewNav":function(){define("dojo/_base/declare dojo/parser dojo/dom-construct dojo/dom-class dojo/dom-attr dojo/dom-geometry dojo/window dojo/on dojo/json dojo/_base/lang dijit/layout/_LayoutWidget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/AssignmentReviewNav.html xl/util/localization!html5player/assignment".split(" "),
function(c,d,a,b,e,f,h,n,m,k,g,q,t,u,p){var s="correct incorrect partial worked notattempted needsgrading".split(" ");return c("xl.dijit.AssignmentReviewNav",[g,q,t],{templateString:u,isReview:!1,loadData:function(a,b){this._setHeaderText();this._loadData(a,b);this._selectLI(0)},updateDisplay:function(a){this._selectLI(a)},updateStats:function(a,b){this._updateLiStats(a,b)},_isNeedsGrading:function(a){return a.needsGrading},layout:function(){var a=f.getMarginBox(this.domNode),b=f.getMarginBox(this.assignmentreviewnavheader);
f.setMarginBox(this.assignmentreviewnavtablediv,{h:a.h-b.h})},_setHeaderText:function(){this.assignmentreviewnavheader.innerHTML="\x3ch3\x3e"+p["assignmentReviewNavHeader.New"]+"\x3c/h3\x3e"},_notAttemptedOrScored:function(a){return"notattempted"===(a.status||"").toLowerCase()&&!a.correctness},_loadData:function(b,c){a.empty(this.assignmentreviewnavUL);var d=this;b.forEach(function(a,b){d._createaListItem(d.assignmentreviewnavUL,a,b,c)})},_isNeedGradingIncluded:function(a){var b=this,c=!1;a.forEach(function(a,
d){b._isNeedsGrading(a)&&(c=!0)});return c},_createaListItem:function(b,c,d,e){b=a.create("li",{},b);this._createIconSpan(b,c,e);this._createAnAnchor(b,c,d,e)},_createIconSpan:function(c,d,e){c=a.create("span",{ariaHidden:!0},c);d=this._getCorrectnessStatus(d,e);b.add(c,"iconSpanWOGrading "+d)},_createAnAnchor:function(b,c,d,f){var g=c.title,h=this._createQuestionLabel(void 0===c.number?d+1:c.number,c.isMedia);c=this._getCorrectnessStatus(c,f);b=a.create("a",{href:"#",innerHTML:h},b);g&&e.set(b,"title",
g);c&&e.set(b,"aria-label",h+", "+p[c]);var k=this;this.own(n(b,"click",function(){k.assignment._requestItemNodeResult({command:"loadquestion",commandArgs:{questionIndex:d}});k._selectLI(d)}))},_createQuestionLabel:function(a,b){var c="",c=b?p.hasOwnProperty("assignmentReviewNavMedia")?p.assignmentReviewNavMedia:"Media {0}":p.assignmentReviewNavQuestion;return k.replace(c,[a])},_getCorrectnessStatus:function(a,b){var c=(b||"").toLowerCase();return this._isNeedsGrading(a)?"needsgrading":a.isPartnerGraded&&
"InProgress"===a.status?"partial":this._notAttemptedOrScored(a)?"test"===c?this.isReview?"incorrect":"notattempted":"":(a.correctness||"").toLowerCase()},_selectLI:function(a){for(var c=this.assignmentreviewnavUL.childNodes,d=0;d<c.length;d++){var e=c[d];e&&b.remove(e,"selected")}(a=this.assignmentreviewnavUL.childNodes[a])&&b.add(a,"selected");h.scrollIntoView(a)},_updateLiStats:function(a,c){var d=this.assignmentreviewnavUL.childNodes[a.index].getElementsByTagName("span");if(d&&d[0])if(this._isNeedsGrading(a))b.replace(d[0],
"needsgrading",s);else if(null!==a.score&&0<=a.score&&a.correctness)b.replace(d[0],a.correctness.toLowerCase(),s);else if(a.score>=a.points)b.replace(d[0],"correct",s);else if(0<a.score)b.replace(d[0],"partial",s);else if(0===a.score)b.replace(d[0],"incorrect",s);else if("test"===(c||"").toLowerCase())b.replace(d[0],this.isReview?"incorrect":"notattempted",s)}})})},"xl/dijit-bootstrap/CheckBox":function(){define("dojo/_base/declare dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin dijit/form/_ButtonMixin dijit/form/_FormWidgetMixin dijit/form/_ToggleButtonMixin dijit/form/_CheckBoxMixin dojo/text!./templates/CheckBox.html".split(" "),
function(c,d,a,b,e,f,h,n,m){return c("xl.dijit-bootstrap.CheckBox",[a,b,f,e,h,n],{baseClass:"checkbox-inline",templateString:m,_setTypeAttr:function(){},buildRendering:function(){this.inherited(arguments)},_getValueAttr:function(){return this.checked?this.value:!1},_setLabelAttr:function(a){this.containerNode.innerHTML=a}})})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(c,d){return c("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",
_onClick:function(a){var b=this.checked;this._set("checked",!b);var c=this.inherited(arguments);this.set("checked",c?this.checked:b);return c},_setCheckedAttr:function(a,b){this._set("checked",a);var c=this.focusNode||this.domNode;this._created&&d.get(c,"checked")!=!!a&&d.set(c,"checked",!!a);c.setAttribute(this._aria_attr,String(a));this._handleOnChange(a,b)},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.checked&&a.setAttribute("checked","checked")},reset:function(){this._hasBeenBlurred=
!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(c,d){return c("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(a){this._set("readOnly",a);d.set(this.focusNode,"readOnly",a)},_setLabelAttr:void 0,_getSubmitValue:function(a){return null==a||""===a?"on":a},_setValueAttr:function(a){a=this._getSubmitValue(a);this._set("value",a);
d.set(this.focusNode,"value",a)},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));d.set(this.focusNode,"value",this.value)},_onClick:function(a){return this.readOnly?(a.stopPropagation(),a.preventDefault(),!1):this.inherited(arguments)}})})},"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\n\t\t\t\tid\x3d"${id}_label"\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\n\t\t\t\x3e\x3c/span\n\t\t\x3e\x3c/span\n\t\x3e\x3c/span\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\n\t\ttabIndex\x3d"-1" role\x3d"presentation" data-dojo-attach-point\x3d"valueNode"\n/\x3e\x3c/span\x3e\n',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n',
"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset dijitMenuItem" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n',
"url:dijit/templates/CheckedMenuItem.html":'\x3ctr class\x3d"dijitReset dijitMenuItem" data-dojo-attach-point\x3d"focusNode" role\x3d"${role}" tabIndex\x3d"-1" aria-checked\x3d"${checked}"\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\n\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\t\x3cspan class\x3d"dijitMenuItemIconChar dijitCheckedMenuItemIconChar"\x3e${checkedChar}\x3c/span\x3e\n\t\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,labelNode,textDirNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\x26#160;\x3c/td\x3e\n\x3c/tr\x3e\n',
"url:xl/assignment/templates/OverviewPanel.html":'\ufeff\x3cdiv\x3e\n    \x3cdiv role\x3d"dialog" aria-modal\x3d"true" class\x3d"overviewPanelContent" data-dojo-attach-point\x3d"overviewPanelContent" tabindex\x3d"-1"\x3e\n        \x3cdiv class\x3d"overviewHeader"\x3e\n            \x3cbutton data-dojo-attach-point\x3d"printButton" data-dojo-attach-event\x3d"click:_printButtonClicked" data-dojo-props\x3d"tabIndex:5" style\x3d"float:left;" data-dojo-type\x3d"xl/dijit-bootstrap/Button"\x3e${printText}\x3c/button\x3e\n            \x3cspan data-dojo-attach-point\x3d"title" role\x3d"heading" aria-level\x3d"3" \x3e\x3c/span\x3e\n            \x3cbutton data-dojo-attach-point\x3d"doneButton" data-dojo-attach-event\x3d"click:_doneButtonClicked" data-dojo-props\x3d"tabIndex:7" style\x3d"float:right; width:32px;" data-dojo-type\x3d"xl/dijit-bootstrap/Button" aria-label\x3d"${doneLabel}"\x3e${doneText}\x3c/button\x3e\n        \x3c/div\x3e\n        \x3cspan class\x3d"sr-only"\x3eDialog content starts\x3c/span\x3e\n        \x3ciframe class\x3d"offScreen" data-dojo-attach-point\x3d"frame" tabIndex\x3d"6" src\x3d"about:blank" data-dojo-type\x3d"xl/dijit/Iframe" title\x3d"Overview"\x3e\x3c/iframe\x3e\n        \x3cspan class\x3d"sr-only"\x3eDialog content ends\x3c/span\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:xl/player/templates/PlayerMenu.html":'\ufeff\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"${baseClass}"\x3e\n    \x3cbutton data-dojo-attach-point\x3d"icon, _buttonNode, focusNode" class\x3d"${baseClass}Icon" aria-label\x3d"Player Menu" aria-haspopup\x3d"true" role\x3d"menu"\x3e\x3cspan data-dojo-attach-point\x3d"buttonLabel"\x3e\x26nbsp;\x3c/span\x3e\x3c/button\x3e\n    \x3cdiv data-dojo-attach-point\x3d"dropDown" class\x3d"${baseClass}Menu" data-dojo-type\x3d"dijit.Menu" style\x3d"display: none;"\x3e\x3c/div\x3e\n\x3c/div\x3e',
"url:xl/dijit/templates/AssignmentReviewNav.html":'\ufeff\x3cdiv data-dojo-attach-point\x3d"assignmentreviewnav" class\x3d"assignmentreviewnav"\x3e\n        \x3cdiv data-dojo-attach-point\x3d"assignmentreviewnavheader" class\x3d"assignmentreviewnavheader"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"assignmentreviewnavtablediv" class\x3d"assignmentreviewnavtablediv"\x3e\n            \x3ca data-dojo-attach-point\x3d"focusshifter" class\x3d"sr-only" style\x3d"margin: 15px;" href\x3d"#"\x3eSkip\x3c/a\x3e\n            \x3cdiv data-dojo-attach-point\x3d"assignmentreviewnavListContainer" class\x3d"assignmentreviewnavListContainer"\x3e\n                \x3cul data-dojo-attach-point\x3d"assignmentreviewnavUL"\x3e\x3c/ul\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n\x3c/div\x3e',
"url:xl/dijit-bootstrap/templates/CheckBox.html":'\ufeff\x3clabel\x3e\n    \x3cinput type\x3d"checkbox" aria-checked\x3d"false"\n            data-dojo-attach-point\x3d"valueNode,focusNode"\n            data-dojo-attach-event\x3d"ondijitclick:_onClick" /\x3e\n    \x3cspan data-dojo-attach-point\x3d"containerNode"\x3e\x3c/span\x3e\n\x3c/label\x3e\n\n\n',"url:xl/assignment/templates/AssignmentPlayer.html":'\ufeff\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\n    \x3cdiv class\x3d"main-content-container" data-dojo-attach-point\x3d"panelMain"\n         style\x3d"height: 100%"\x3e\n        \x3cdiv class\x3d"title-bar" data-dojo-attach-point\x3d"panelMainBar"\x3e\n            \x3ctable class\x3d"valign-middle"\x3e\n                \x3ctr\x3e\n                    \x3ctd class\x3d"assignment-title fullwidth"\x3e\n                        \x3cspan role\x3d"heading" aria-level\x3d"2" class\x3d"title" data-dojo-attach-point\x3d"titleNode"\x3e\x3c/span\x3e\n                    \x3c/td\x3e\n                    \x3ctd class\x3d"assignment-extra"\x3e\n                        \x3cspan class\x3d"time" data-dojo-attach-point\x3d"timeInfoSpan"\x3e\n                            \x3clabel data-dojo-attach-point\x3d"timeLabel"\x3e\x3c/label\x3e\n                            \x3cspan data-dojo-attach-point\x3d"timeValue"\x3e\x3c/span\x3e\n                        \x3c/span\x3e\n                        \x3cspan class\x3d"title" data-dojo-attach-point\x3d"extraTitleNode"\x3e\x3c/span\x3e\n                        \x3cbutton data-dojo-attach-point\x3d"btnClose" data-dojo-type\x3d"xl.dijit-bootstrap.Button" data-dojo-props\x3d"tabIndex:1" class\x3d"btn-primary"\x3eClose\x3c/button\x3e\n                        \x3cbutton data-dojo-attach-point\x3d"btnSettings" data-dojo-type\x3d"xl.player.PlayerMenu" data-dojo-props\x3d"baseClass:\'button-settings hidden\',tabIndex:2" data-dojo-attach-event\x3d"onClick:settingsButtonClicked"\x3e\n                        \x3c/button\x3e\n                    \x3c/td\x3e\n                \x3c/tr\x3e\n            \x3c/table\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"summary-bar" data-dojo-attach-point\x3d"panelSubBar"\x3e\n            \x3ctable data-dojo-attach-point\x3d"panelStats"\x3e\n                \x3ctr\x3e\n                    \x3ctd class\x3d"left"\x3e\n                        \x3cspan class\x3d"text" data-dojo-attach-point\x3d"labelItemTitle"\x3e\x3c/span\x3e\n                    \x3c/td\x3e\n                    \x3ctd class\x3d"align-center center"\x3e\n                        \x3cspan data-dojo-attach-point\x3d"labelOverview" class\x3d"hidden"\x3e\x3c/span\x3e\n                        \x3cdiv class\x3d"btn-group nowrap" data-dojo-attach-point\x3d"groupOverview" role\x3d"navigation"\x3e\n                            \x3cbutton data-dojo-attach-point\x3d"btnPrev" data-dojo-type\x3d"xl.dijit-bootstrap.Button"\n                                    class\x3d"btn-prev" data-dojo-props\x3d"tabIndex:3"\x3e\n                                \x3cspan class\x3d"icon-arrow-left"\x3e\x3c/span\x3e\n                            \x3c/button\x3e\x3cbutton data-dojo-attach-point\x3d"btnOverview" data-dojo-type\x3d"xl.assignment.OverviewButton"\n                                             class\x3d"btn btn-default btn-overview" data-dojo-props\x3d"tabIndex:4"\x3e\n                                \x3cspan class\x3d"icon-arrow-down"\x3e\x3c/span\x3e\n                            \x3c/button\x3e\x3cbutton data-dojo-attach-point\x3d"btnNext" data-dojo-type\x3d"xl.dijit-bootstrap.Button"\n                                             class\x3d"btn-next" data-dojo-props\x3d"tabIndex:8"\x3e\n                                \x3cspan class\x3d"icon-arrow-right"\x3e\x3c/span\x3e\n                            \x3c/button\x3e\n                        \x3c/div\x3e\n                    \x3c/td\x3e\n                    \x3ctd class\x3d"right align-right"\x3e\n                        \x3cdiv class\x3d"text" data-dojo-attach-point\x3d"labelOverallScore"\x3e\x3c/div\x3e\n                    \x3c/td\x3e\n\n                \x3c/tr\x3e\n            \x3c/table\x3e\n            \x3ctable role\x3d"presentation" data-dojo-attach-point\x3d"panelRemediationTopBar" style\x3d"display:none" class\x3d"remediationBar"\x3e\n                \x3ccolgroup\x3e\n                    \x3ccol width\x3d"100%"/\x3e\n                    \x3ccol/\x3e\n                \x3c/colgroup\x3e\n                \x3ctr\x3e\n                    \x3ctd class\x3d"left remediationTitle"\x3e\n                        \x3cspan data-dojo-attach-point\x3d"labelRemediationTitle" class\x3d"remediationTitle"\x3e\x3c/span\x3e\n                    \x3c/td\x3e\n                    \x3ctd class\x3d"right"\x3e\n                        \x3cbutton data-dojo-attach-point\x3d"btnReturnToHW" data-dojo-type\x3d"xl.dijit-bootstrap.Button" data-dojo-props\x3d"tabIndex:2" class\x3d"btn-primary btnReturnToHW"\x3eReturn\x3c/button\x3e\n                    \x3c/td\x3e\n                \x3c/tr\x3e\n            \x3c/table\x3e\n        \x3c/div\x3e\n\n        \x3cdiv style\x3d"overflow: hidden;"\x3e\n            \x3ctable class\x3d"itemplayertable" role\x3d"presentation" data-dojo-attach-point\x3d"itemPlayerTable" \x3e\n                \x3ctr class\x3d"itemplayertablerow" data-dojo-attach-point\x3d"itemPlayerTableRow"\x3e\n                    \x3ctd\x3e\n                        \x3cdiv class\x3d"player-wrapper" data-dojo-attach-point\x3d"panelPlayer" role\x3d"main"\x3e\n                            \x3ciframe data-dojo-attach-point\x3d"activityFrame" id\x3d"activityFrame" src\x3d"about:blank" scrolling\x3d"auto"\n                                    style\x3d"width: 100%; height: 100%; border: none;" title\x3d"Question"\x3e\x3c/iframe\x3e\n                        \x3c/div\x3e\n                    \x3c/td\x3e\n                \x3c/tr\x3e\n            \x3c/table\x3e\n        \x3c/div\x3e\n\n    \x3c/div\x3e\n\x3c/div\x3e\n'}});
define("xl/assignment/AssignmentPlayer","dojo/_base/declare dijit/form/Button dijit/MenuSeparator dijit/MenuItem dijit/CheckedMenuItem dijit/focus dojo/on dojo/touch dojo/has dojo/json dojo/_base/lang dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/Deferred dojo/_base/unload dojo/_base/config dojo/dom-class dojo/_base/kernel dijit/Viewport ../paf/PlayerLoader ./OverviewButton ../player/AssemblyInfo ./actions/ActionHandler ../util/errorPanel ../util/stringUtils ../player/dialogs/ConfirmationDialog ../player/PlayerMenu ../util/ioQuery ./_AssignmentPlayerBase xl/dijit/_FullHeight xl/util/ga xl/dijit/AssignmentReviewNav ../dijit-bootstrap/CheckBox ../dijit-bootstrap/Button ../dijit-bootstrap/bootstrapUtils ../util/logger dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/AssignmentPlayer.html xl/util/localization!html5player/player xl/util/localization!html5player/assignment".split(" "),
function(c,d,a,b,e,f,h,n,m,k,g,q,t,u,p,s,l,v,r,z,C,D,E,x,K,y,I,M,F,B,G,H,J,S,N,O,T,A,U,P,Q,R,w,L){t.boxModel="border-box";return c("xl.assignment.AssignmentPlayer",[H,P,Q,J],{templateString:R,baseClass:"assignmentViewer",widgetsInTemplate:!0,_playerLoader:null,playMode:null,_quizMode:!1,_currentSequenceNodeId:null,_nodeResultRequests:null,_messageIdCounter:0,_testTimer:null,_timerDialogShowing:!1,_loadingSequenceNodeId:null,_displayInitialized:!1,currentQuestionStatus:null,extraTitle:"",lastFocusedElement:null,
enableIesSession:null,iesClientUrl:null,iesClientId:null,constructor:function(){this.inherited(arguments);this._actionHandler=new y},initialize:function(a){this.inherited(arguments);this.enableIesSession=a.enableIesSession;this.iesClientUrl=a.iesClientUrl;this.iesClientId=a.iesClientId;var b="playmode-"+a.playMode.toLowerCase();z.replace(this.domNode,b,["playmode-test","playmode-homework","playmode-normal"]);this.postCommand("initial",{culture:a.culture}).then(function(){})},postCreate:function(){this.inherited(arguments);
this._setupUIEvents();this._playerLoader=new E(this.activityFrame);this._playerLoader.on(this._playerLoader.EVENT_PLAYER_READY,g.hitch(this,this._handlePlayerReady));this._playerLoader.on(this._playerLoader.EVENT_NODERESULT_RESPONSE,g.hitch(this,this._handleNodeResultResponse));this._playerLoader.on(this._playerLoader.EVENT_NAVIGATE,g.hitch(this,this._handleNavigate));this._playerLoader.on(this._playerLoader.EVENT_LOAD_QUESTION,g.hitch(this,this._handleLoadQuestion));this._playerLoader.on(this._playerLoader.EVENT_SUBMITGRADE,
g.hitch(this,this._handleSubmitGrade));this._playerLoader.on(this._playerLoader.EVENT_MEDIANODERESULT,g.hitch(this,this._handleMediaNodeResult));this._playerLoader.on(this._playerLoader.EVENT_SEQUENCENODE_LOADED,g.hitch(this,this._handleSequenceNodeLoaded));this._playerLoader.on(this._playerLoader.EVENT_PRINT_REQUEST,g.hitch(this,this._handlePrintRequest));this._playerLoader.on(this._playerLoader.EVENT_ASSIGNMENT_COMMAND,g.hitch(this,this._handleAssignmentCommand));this._playerLoader.on(this._playerLoader.EVENT_TOGGLE_UI,
g.hitch(this,this._handleToggleUI));this._playerLoader.on(this._playerLoader.EVENT_ALLOW_CLOSE,g.hitch(this,this._handleAllowClose));this._playerLoader.on(this._playerLoader.EVENT_TOGGLE_STANDBY,g.hitch(this,this._handleToggleStandby));this._playerLoader.on(this._playerLoader.EVENT_OPEN_OVERVIEW,g.hitch(this,this._handleOpenOverview));this._playerLoader.on(this._playerLoader.EVENT_CLOSE_OVERVIEW,g.hitch(this,this._handleCloseOverview));this._playerLoader.on(this._playerLoader.EVENT_CLOSE_ACTIVITY,
g.hitch(this,this._handleCloseActivity));this._playerLoader.on(this._playerLoader.EVENT_ASSIGNMENT_ACTION,g.hitch(this,this._handleAssignmentAction));this._playerLoader.on(this._playerLoader.EVENT_RETURN_TO_ASSIGNMENT,g.hitch(this,this._buttonReturnToHWClicked));this._notifyPlayerReady();m("touch")&&z.add(this.domNode,"ios");this.own(h(window,"resize",g.hitch(this,this._layout)))},resize:function(){this._displayInitialized&&this._layout()},localeChanged:function(a){this._updateDisplay();this._postPlayerMessage(a)},
close:function(){this._processingNodeResultResponse||(this._isAdaptive&&!this.reviewMode?this._buttonNextClicked():this._requestItemNodeResult({command:"finish"}))},_modalToggled:function(a){this.inherited(arguments);var b=a.state;b&&(this.lastFocusedElement=f.curNode);this.btnOverview.closeDropDown();this.btnOverview.set("disabled",b);this.btnPrev.set("disabled",b||this._stats&&this._stats.currentQuestion&&!this._stats.prevEnabled);this.btnNext.set("disabled",b||this._stats&&this._stats.currentQuestion&&
!this._stats.nextEnabled);this.btnClose.set("disabled",b);this.btnReturnToHW.set("disabled",b);this.updateEmbeddedAssignmentControls(b);!b&&this.lastFocusedElement&&f.focus(this.lastFocusedElement)},_handlePlayerReady:function(){this.updateEmbeddedAssignmentControls()},_handleOpenOverview:function(){this.btnOverview&&!this.btnOverview._opened&&this.btnOverview.openDropDown()},_handleCloseOverview:function(){this.btnOverview&&this.btnOverview._opened&&this.btnOverview.closeDropDown()},_handleAllowClose:function(){this._disableUnloadPrompt=
!0},_handleCloseActivity:function(a){this.closeAssignment({error:a.reason})},_layout:function(){var a=t.getMarginBox(this.panelMainBar),b=t.getMarginBox(this.panelSubBar),c=this.getWindowWidth(),a=this.getWindowHeight()-a.h-b.h,b=0;this.assignmentReviewNav&&0!==t.getMarginBox(this.assignmentReviewNav.domNode).w&&(b=220,this.assignmentReviewNav.resize({w:b,h:a}));c={h:a,w:c-(b?b+1:0)};t.setMarginBox(this.activityFrame,c);t.setMarginBox(this.panelPlayer,c)},_postPlayerMessage:function(a){this._playerLoader.postMessage(a)},
_handlePrintRequest:function(a){a.fromPrintDialog&&(this._disableUnloadPrompt=!0);this._requestItemNodeResult({command:"print",commandArgs:{options:a.options,assignmentOptions:a.assignmentOptions}},!0)},_handleSequenceNodeLoaded:function(a){this.updatePlayerViewerNavData();this.updateOverviewText();null==this._loadingSequenceNodeId&&console.error("SequenceNodeLoaded Event, but flag not set for loading sequenceNode",a);a.sequenceNodeId!==this._loadingSequenceNodeId&&console.error("SequenceNodeLoaded Event, SequenceNode ids don't match",
this._loadingSequenceNodeId,a);"ERROR:HIGHSTAKES"===a.status?this.closeAssignment({error:a.status}):(this._currentSequenceNodeId=a.sequenceNodeId,a.currentQuestion=this._stats.currentQuestion,this._loadingSequenceNodeId=null,this._postHostMessage(a))},_handleAssignmentCommand:function(a){this.postCommand(a.command,a.arguments)},loadSequenceNode:function(a){var b=this;b._loadingSequenceNodeId&&console.error("Attempting to loadSequenceNode while currently loading another (",b._loadingSequenceNodeId,
").",a);b._loadingSequenceNodeId=a["@id"];var c=a.player.frameFrontend.frameUri;0===a.player.contentType.indexOf("application/vnd.pearson.xl.")&&(c=G.addToQueryString(c,{cultureId:a.extra.cultureId,theme:this.theme||"math",style:this.style,disableStandbyIndicator:!0,assignmentHandlesLocale:!0,enableIesSession:this.enableIesSession,iesClientUrl:this.iesClientUrl,iesClientId:this.iesClientId}));this._playerLoader.loadPlayer(c).then(function(){b._postPlayerMessage(a);b._updateTopBar(a.parentNode)})},
_requestItemNodeResult:function(a,b){if(this._standbyDisplayed||this._processingNodeResultResponse||this._loadingSequenceNodeId)return"";var c=this._currentSequenceNodeId,d=c+"_"+this._messageIdCounter++;this._nodeResultRequests[d]={sequenceNodeId:c,reason:a};this._postPlayerMessage({"@context":"http://purl.org/pearson/paf/v1/ctx/core/NodeResultRequest","@type":"NodeResultRequest",msgId:d,requestedNode:c,skipCompleteCheck:b?!0:!1});return d},updateStats:function(a){this._stats=a;this._updateDisplay();
this.currentQuestionStatus=a.currentQuestion;this.assignmentReviewNav&&this.assignmentReviewNav.updateStats(a.currentQuestion,this.playMode)},_updateTopBar:function(a){a?(this.panelStats.style.display="none",this.panelRemediationTopBar.style.display="",z.add(this.panelSubBar,"remediationBar")):(this.panelStats.style.display="",this.panelRemediationTopBar.style.display="none",z.remove(this.panelSubBar,"remediationBar"))},_updateDisplay:function(){var a=this._stats;this.labelRemediationTitle.innerHTML||
(this.labelRemediationTitle.innerHTML=a.remediationTitle);this.btnReturnToHW.set("label",a.returnButtonLabel);this._updateTopBar(!!a.isRemediationQuestion);if(!("undefined"===typeof a.currentQuestion||0>a.currentQuestion.index)){this.containerNode.focus();this.btnPrev.set("disabled",!a.prevEnabled);this.btnNext.set("disabled",!a.nextEnabled);a.closeButtonLabel&&(this.btnClose.set("label",a.closeButtonLabel),this.closeButtonLabel=a.closeButtonLabel);var b=g.replace(w["info.x_of_y"],[a.currentQuestion.index+
1,a.questionCount]),c=g.replace(L["button.overview.title"],[a.currentQuestion.index+1,a.questionCount]);this.assignmentReviewNav&&this.assignmentReviewNav.updateDisplay(a.currentQuestion.index);this.updatePlayerViewerNavData(a.currentQuestion);!this.reviewMode&&(!this._stopAndResume&&!a.noResults)&&(b+=g.replace(" ({0} {1})",[a.completedCount,w["info.complete"]]),c+=g.replace(", {0} {1}",[a.completedCount,w["info.complete"]]));this._isAdapative&&!this.reviewMode&&A.hide(this.groupOverview);this._stopAndResume&&
!this.reviewMode?(A.show(this.labelOverview),A.hide(this.groupOverview),this.labelOverview.innerHTML=b):(this.btnOverview.set("label",b+'\x26nbsp;\x3cspan class\x3d"icon-arrow-down"/\x3e'),u.set(this.btnOverview.domNode,{title:c,"aria-label":c}));if(this._isAdaptive&&!this.reviewMode)A.hide(this.btnPrev),A.hide(this.btnNext);else{var c=a.currentQuestion,d=c.score,e=c.points;this._isHomework()||this._isTest()&&this.reviewMode?(b=g.replace("\x3cb\x3e{0}\x3c/b\x3e {1}",[w["info.score_label"],this._strPtsOf(this._formatNumber(Math.max(d,
0)),e,!0)]),c=g.replace("{0} {1}",[w["info.score_label"],this._strPtsOf(this._formatNumber(Math.max(d,0)),e,!1)])):this._isTest()?(b=g.replace("\x3cb\x3e{0}\x3c/b\x3e {1}",[w["info.this_question_label"],this._strPts(e)]),c=g.replace("{0} {1}",[w["info.this_question_label"],this._strPts(e)])):c=b=c.objectiveTitle;this.labelItemTitle.innerHTML=b;this.labelItemTitle.parentElement.setAttribute("aria-label",c);this.labelItemTitle.setAttribute("aria-hidden","true");b&&(b=this.stripHtml(b),u.set(this.labelItemTitle,
"title",b));A.show(this.labelOverallScore);this._oneAttemptMode&&!this.reviewMode||a.noResults?A.hide(this.labelOverallScore):this._isHomework()||this._isTest()&&this.reviewMode?(b=a.assignmentPoints||a.totalScore,c=100*b/a.totalPoints,d=w["info.assignment_score_label_short"],this._isTest()&&(d=w["info.test_score_label"]),this.labelOverallScore.innerHTML=g.replace("\x3cb\x3e{2}\x3c/b\x3e {0}%, {1}",[this._formatNumber(c),this._strPtsOf(this._formatNumber(b),a.totalPoints,!1),d])):this._isTest()?(b=
this._isQuiz()?"info.this_quiz_label":"info.this_test_label",this.labelOverallScore.innerHTML=g.replace("\x3cb\x3e{0}\x3c/b\x3e {1}",[M.sentenceCase(w[b]),g.replace(w["info.possible"],[a.totalPoints])])):this.labelOverallScore.innerHTML=a.correctCount+" "+w["info.correct"]}this._updateTimeDisplay();this.updateEmbeddedAssignmentControls();this.updateOverviewText()}},initDisplay:function(c){this.inherited(arguments);this.theme=c.theme;this.style=c.style;c.extraTitle&&(this.extraTitle=c.extraTitle,this.extraTitleNode.innerHTML=
c.extraTitle);var d="playmode-"+this.playMode.toLowerCase();z.replace(this.domNode,d,["playmode-test","playmode-homework","playmode-normal"]);d=c.overviewTitle&&c.overviewTitle.trim().length?c.overviewTitle:L.overviewPanelTitle;this.btnOverview.setup({url:c.overview,title:d,postOverviewCommand:c.postOverviewCommand,assignmentTitle:c.plainTitle});this.activityFrame.title=d+" : "+this.titleNode.innerText;this._showInstructorPreviewPanel=c.showInstructorPreviewPanel;this._updateInstructorPreviewPanel(c.showCompletedProblemLabel);
this._isAdaptive=c.isAdaptive;this._isAdaptiveHW=c.isAdaptiveHW;this._isProfView=c.isProfView;this._initAssignmentReviewNav(c.assignmentReviewNavData);if(this.btnSettings&&c.settingsMenuItems&&0<c.settingsMenuItems.length){z.remove(this.btnSettings.domNode,"hidden");this.btnSettings.dropDown.destroyDescendants(!1);for(var f=this,d=function(){this.data.isToggle&&(void 0===this.data.commandArgs&&(this.data.commandArgs={}),this.data.commandArgs.checked=this.checked);"about"===this.data.command?f.postCommand(this.data.command,
{dojoVersion:C.version.toString()}):f.postCommand(this.data.command,this.data.commandArgs)},g=function(){f._playActions(this.data.actions,f)},h=0;h<c.settingsMenuItems.length;h++){var k=c.settingsMenuItems[h];if("Separator"===k.type)k=new a,this.btnSettings.dropDown.addChild(k);else{var l;l=k.isToggle?new e({label:k.label,checked:k.initialState,data:k}):new b({label:k.label,data:k});if("Command"===k.type)l.on("click",d);else if("Actions"===k.type)l.on("click",g);this.btnSettings.dropDown.addChild(l)}}}c.hideAssignmentControls&&
A.hide(this.panelSubBar);u.set(this.btnNext.domNode,{title:w["button.next_question"],"aria-label":w["button.next_question"]});u.set(this.btnPrev.domNode,{title:w["button.previous_question"],"aria-label":w["button.previous_question"]});this._displayInitialized=!0;this._layout()},_initAssignmentReviewNav:function(a){this.assignmentReviewNavData=a;this.reviewMode&&(this._isProfView&&this.assignmentReviewNavData)&&(this.assignmentReviewNav=this._createAssignmentReviewNav(),this.assignmentReviewNav.loadData(a,
this.playMode))},updateEmbeddedAssignmentControls:function(a){1<=arguments.length&&(this._disableEmbeddedAssignmentButtons=a);var b=this._stats||{};this._postPlayerMessage({"@type":"UpdateEmbeddedAssignmentControls",title:this.title,extraTitle:this.extraTitle,overviewTitle:this.btnOverview.title,isRemediationQuestion:!!b.isRemediationQuestion,index:b.currentQuestion?b.currentQuestion.index:null,components:{prev:{enabled:!!b.prevEnabled},next:{enabled:!!b.nextEnabled},close:{label:this.closeButtonLabel,
hidden:!!this.hideCloseButton},navigation:{hidden:(this._isAdapative||this._stopAndResume)&&!this.reviewMode},enabled:!this._disableEmbeddedAssignmentButtons},scores:{item:this._getItemScores(b),overall:A.getVisible(this.labelOverallScore)?this.labelOverallScore.innerHTML:""},assignmentType:{isTest:this._isTest(),isReview:this.reviewMode}})},_getItemScores:function(a){return!a||!a.currentQuestion?void 0:this.reviewMode||!this._isTest()?{earned:a.currentQuestion?Math.max(a.currentQuestion.score,0):
null,total:a.currentQuestion?a.currentQuestion.points:null,possible:null}:{earned:null,total:null,possible:a.currentQuestion.points}},_createAssignmentReviewNav:function(){var a;return!this.assignmentReviewNav?(a=p.create("td"),z.add(a,"assignmentreviewnavcell"),p.place(a,this.itemPlayerTableRow,"first"),a=(new N({assignment:this})).placeAt(a)):this.assignmentReviewNav},_updateInstructorPreviewPanel:function(a){this._showInstructorPreviewPanel&&(this._showCompletedCheckbox=(new O({value:"checked",
checked:!1,onClick:g.hitch(this,this._showCompletedProblemClicked),label:a})).placeAt(this.timeInfoSpan,"before"))},_showCompletedProblemClicked:function(){var a=this._showCompletedCheckbox.get("checked");this.postCommand("showcompletedproblem",{checked:a})},_setupUIEvents:function(){m("touch")?this.own(h(this.btnPrev,n.release,g.hitch(this,this._buttonPrevClicked)),h(this.btnNext,n.release,g.hitch(this,this._buttonNextClicked)),h(this.btnClose,n.release,g.hitch(this,this.close)),h(this.btnReturnToHW,
n.release,g.hitch(this,this._buttonReturnToHWClicked)),h(document,"click",g.hitch(this,this._handleCloseOverview))):this.own(h(this.btnPrev,"click",g.hitch(this,this._buttonPrevClicked)),h(this.btnNext,"click",g.hitch(this,this._buttonNextClicked)),h(this.btnClose,"click",g.hitch(this,this.close)),h(this.btnReturnToHW,"click",g.hitch(this,this._buttonReturnToHWClicked)),h(document,"click",g.hitch(this,this._handleCloseOverview)))},_buttonPrevClicked:function(){this._requestItemNodeResult({command:"previousquestion"})},
_buttonNextClicked:function(a){a=a||{};this._requestItemNodeResult({command:"nextquestion",commandArgs:{previousCorrect:a.previousCorrect}})},_buttonRemediationClicked:function(a){a=a||{};this._requestItemNodeResult({command:"remediation",commandArgs:{eventAction:a.eventAction,previousCorrect:a.previousCorrect}},!0)},_buttonReturnToHWClicked:function(){this._requestItemNodeResult({command:"reloadquestion",commandArgs:{eventAction:"ReturnToHomeworkHeaderButton"}})},_saveForLaterClicked:function(){this._isAdaptive?
this.postCommand("saveforlater"):this._requestItemNodeResult({command:"saveforlater"})},_inactivityTimeout:function(){this._requestItemNodeResult({command:"inactivitytimeout"},!0)},_reloadQuestion:function(){this._requestItemNodeResult({command:"reloadquestion"})},_handleNavigate:function(a){"next"===a.direction?this._buttonNextClicked(a):"previous"===a.direction?this._buttonPrevClicked():"saveforlater"===a.direction?this._saveForLaterClicked():"inactivitytimeout"===a.direction?this._inactivityTimeout():
"reload"===a.direction||"backfromremediation"===a.direction?this._reloadQuestion():"remediation"===a.direction?this._buttonRemediationClicked(a):"close"===a.direction&&this.close()},_handleLoadQuestion:function(a){this._requestItemNodeResult({command:"loadquestion",commandArgs:{questionIndex:a.questionIndex}})},_handleMediaNodeResult:function(a){this.postCommand("medianoderesult",{mediaNodeResult:a})},_formatNumber:function(a){return a.toFixed(2).replace(/0+$/,"").replace(/\.$/,"")},settingsButtonClicked:function(){},
_strPtsOf:function(a,b,c){return 1===b?g.replace(c?w["info.x_of_y_pt"]:w["info.x_of_y_point"],[a,b]):g.replace(c?w["info.x_of_y_pts"]:w["info.x_of_y_points"],[a,b])},_strPts:function(a){return 1==a?g.replace(w["info.pt"],[a]):g.replace(w["info.pts"],[a])},launchMediaQuestion:function(a,b){this._postPlayerMessage({"@type":"LaunchMediaQuestion",questionId:a,partnerGraded:b})},stripHtml:function(a){var b=document.createElement("DIV");b.innerHTML=a;return b.textContent||b.innerText||""},updatePlayerViewerNavData:function(a){this._postPlayerMessage({"@type":"UpdatePlayerNavigationData",
playMode:this.playMode,assignmentReviewNavData:this.assignmentReviewNavData,currentQuestion:a||this.currentQuestionStatus})},updateRemediationControls:function(a){this._postPlayerMessage({"@type":"setRemediationTitles",actionArgs:a})},updateOverviewText:function(){this._postPlayerMessage({"@type":"updateOverviewText",stats:this._stats})},onOverviewClosed:function(a){this._postPlayerMessage({"@type":"OverviewClosed",closeButtonClicked:a})}})});
//@ sourceMappingURL=AssignmentPlayer.js.map